<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GRAPHISTA — Graph-Based AI Memory System</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700;800&display=swap');
  :root{
    --bg:#0a0a0a;--bg2:#111;--bg3:#1a1a1a;--bg4:#222;
    --border:#1e1e1e;--border2:#2a2a2a;--border3:#333;
    --tx:#d0d0d0;--tx2:#888;--tx3:#555;--tx4:#333;
    --white:#eee;--green:#00ff88;--gdim:#00ff8822;
    --red:#ff4444;--blue:#4488ff;--yellow:#ffcc00;--purple:#aa66ff;--cyan:#00dddd;--orange:#ff8844;--pink:#ff66aa;
    --mono:'JetBrains Mono',monospace;
  }
  *{margin:0;padding:0;box-sizing:border-box}
  ::selection{background:#00ff8833;color:#fff}
  body{font-family:var(--mono);background:var(--bg);color:var(--tx);overflow:hidden;-webkit-font-smoothing:antialiased}

  .app{display:grid;grid-template-columns:52px 240px 1fr;grid-template-rows:38px 1fr 26px;height:100vh;opacity:0;pointer-events:none;transition:opacity .5s ease}
  .app.ready{opacity:1;pointer-events:all}

  /* LOADING SCREEN */
  .loader{position:fixed;inset:0;z-index:999;background:var(--bg);display:flex;flex-direction:column;align-items:center;justify-content:center;transition:opacity .6s ease,visibility .6s}
  .loader.done{opacity:0;visibility:hidden;pointer-events:none}
  .loader-grid{position:absolute;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 59px,#0d0d0d 60px),repeating-linear-gradient(90deg,transparent,transparent 59px,#0d0d0d 60px);opacity:.4}
  .loader-inner{position:relative;z-index:1;width:500px;max-width:90vw}
  .loader-logo{font:800 28px var(--mono);color:var(--green);letter-spacing:.15em;text-transform:uppercase;margin-bottom:6px;opacity:0;transform:translateY(8px);animation:lFadeUp .5s .2s ease forwards}
  .loader-sub{font:400 11px var(--mono);color:var(--tx3);letter-spacing:.04em;margin-bottom:28px;opacity:0;animation:lFadeUp .4s .5s ease forwards}
  @keyframes lFadeUp{to{opacity:1;transform:translateY(0)}}
  .loader-lines{min-height:180px}
  .loader-line{font:400 10px var(--mono);line-height:1.9;color:var(--tx3);opacity:0;transform:translateX(-6px);white-space:nowrap;overflow:hidden}
  .loader-line.show{opacity:1;transform:translateX(0);transition:all .2s ease}
  .loader-line .lk{color:var(--green)}.loader-line .lb{color:var(--blue)}.loader-line .ly{color:var(--yellow)}.loader-line .lp{color:var(--purple)}.loader-line .lc{color:var(--tx4)}.loader-line .lw{color:var(--white)}
  .loader-bar{width:100%;height:2px;background:var(--border);margin-top:24px;overflow:hidden;opacity:0;animation:lFadeUp .3s .6s ease forwards}
  .loader-bar .fill{height:100%;width:0%;background:var(--green);transition:width .15s linear}
  .loader-status{font:500 8px var(--mono);color:var(--tx4);text-transform:uppercase;letter-spacing:.08em;margin-top:8px;opacity:0;animation:lFadeUp .3s .7s ease forwards}
  .loader-enter{margin-top:20px;padding:8px 24px;border:1px solid var(--green);background:0;font:600 10px var(--mono);color:var(--green);text-transform:uppercase;letter-spacing:.08em;cursor:pointer;opacity:0;visibility:hidden;transition:all .15s}
  .loader-enter.show{opacity:1;visibility:visible}
  .loader-enter:hover{background:var(--green);color:var(--bg)}

  /* CA INLINE */
  .ca-tag{display:flex;align-items:center;gap:5px;margin-left:8px;padding-left:8px;border-left:1px solid var(--border2)}
  .ca-dot{width:4px;height:4px;border-radius:50%;background:var(--green);animation:pl 1.5s ease infinite;flex-shrink:0}
  .ca-lbl{font:600 8px var(--mono);color:var(--green);text-transform:uppercase;letter-spacing:.06em;flex-shrink:0}
  .ca-addr{font:500 9px var(--mono);color:var(--tx2);background:var(--bg2);border:1px solid var(--border2);padding:2px 6px;user-select:all;cursor:text;max-width:180px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
  .ca-cp{padding:2px 6px;border:1px solid var(--border2);background:0;font:600 7px var(--mono);color:var(--tx3);cursor:pointer;text-transform:uppercase;letter-spacing:.04em;transition:all .1s;flex-shrink:0}
  .ca-cp:hover{border-color:var(--green);color:var(--green)}
  .ca-cp.done{border-color:var(--green);color:var(--green)}
  .ca-xb{padding:2px 5px;border:1px solid var(--border2);background:0;font:500 8px var(--mono);color:var(--tx4);cursor:pointer;transition:all .1s;flex-shrink:0;text-decoration:none}
  .ca-xb:hover{border-color:var(--tx2);color:var(--tx2)}
  @keyframes boot{from{opacity:0}to{opacity:1}}

  /* RAIL */
  .rail{grid-row:1/4;background:var(--bg);border-right:1px solid var(--border);display:flex;flex-direction:column;align-items:center;padding:6px 0;gap:1px;z-index:20}

  .rb{width:36px;height:36px;border:none;background:0;color:var(--tx3);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .1s;position:relative}
  .rb:hover{color:var(--tx)}.rb.on{color:var(--green)}
  .rb.on::before{content:'';position:absolute;left:0;top:50%;transform:translateY(-50%);width:2px;height:14px;background:var(--green)}
  .rb .tp{position:absolute;left:46px;background:var(--bg3);color:var(--tx);font:500 8px var(--mono);padding:2px 6px;border:1px solid var(--border2);white-space:nowrap;pointer-events:none;opacity:0;transition:opacity .1s;z-index:30;text-transform:uppercase;letter-spacing:.05em}
  .rb:hover .tp{opacity:1}
  .rsp{flex:1}

  /* TOPBAR */
  .topbar{grid-column:2/4;display:flex;align-items:center;justify-content:space-between;padding:0 14px;border-bottom:1px solid var(--border);background:var(--bg);z-index:10}
  .tl{display:flex;align-items:center;gap:8px}
  .tt{font:700 10px var(--mono);color:var(--green);letter-spacing:.1em;text-transform:uppercase}
  .tc{font:400 8px var(--mono);color:var(--tx3);text-transform:uppercase;letter-spacing:.04em}
  .tr{display:flex;align-items:center;gap:6px}
  .tb{display:flex;align-items:center;gap:6px;padding:6px 14px;border:1px solid var(--border2);background:var(--bg);font:600 10px var(--mono);color:var(--tx2);cursor:pointer;transition:all .12s;text-transform:uppercase;letter-spacing:.04em;text-decoration:none;white-space:nowrap}
  .tb:hover{border-color:var(--green);color:var(--white);background:var(--bg3)}
  .tb.p{border-color:var(--green);color:var(--green)}
  .tb.p:hover{background:var(--green);color:var(--bg)}
  .tb svg{width:14px;height:14px;flex-shrink:0}

  /* LEFT */
  .left{grid-row:2/3;background:var(--bg2);border-right:1px solid var(--border);display:flex;flex-direction:column;overflow:hidden}
  .lh{padding:12px 12px 8px;border-bottom:1px solid var(--border)}
  .lh h2{font:600 8px var(--mono);color:var(--tx3);text-transform:uppercase;letter-spacing:.1em;margin-bottom:8px}
  .sb{display:flex;align-items:center;gap:5px;border:1px solid var(--border2);padding:4px 7px;transition:border-color .12s}
  .sb:focus-within{border-color:var(--green)}
  .sb input{border:none;outline:none;background:0;font:400 10px var(--mono);color:var(--tx);width:100%}
  .sb input::placeholder{color:var(--tx4)}
  /* CREDIT BANNER */
  .credit{padding:10px 12px;border-bottom:1px solid var(--border);background:var(--bg3)}
  .credit-title{font:600 8px var(--mono);color:var(--green);text-transform:uppercase;letter-spacing:.08em;margin-bottom:4px;display:flex;align-items:center;gap:4px}
  .credit-title .pls{width:4px;height:4px}
  .credit-sub{font:400 7px var(--mono);color:var(--tx3);line-height:1.5;margin-bottom:6px}
  .credit-links{display:flex;gap:4px}
  .credit-link{padding:2px 6px;border:1px solid var(--border2);background:0;font:500 7px var(--mono);color:var(--tx2);cursor:pointer;text-decoration:none;transition:all .1s;text-transform:uppercase;letter-spacing:.04em;display:flex;align-items:center;gap:3px}
  .credit-link:hover{border-color:var(--green);color:var(--green)}
  .credit-link svg{flex-shrink:0}

  /* EXPANDABLE NODES */
  .ni-wrap{overflow:hidden}
  .ni-chevron{flex-shrink:0;color:var(--tx4);font:500 9px var(--mono);transition:transform .2s ease,color .15s;display:flex;align-items:center}
  .ni-chevron.open{color:var(--green);transform:rotate(90deg)}
  .ni-code{overflow:hidden;max-height:0;transition:max-height .4s ease,opacity .3s ease;opacity:0;background:var(--bg);border-left:1px solid var(--green);margin:0 6px 4px 19px}
  .ni-code.open{max-height:400px;opacity:1}
  .ni-code-inner{padding:6px 8px;font:400 8px var(--mono);line-height:1.7;color:var(--tx3)}
  .ni-code-inner .cline{display:block;white-space:nowrap;overflow:hidden}
  .ni-code-inner .ck{color:var(--purple)}.ni-code-inner .cf{color:var(--blue)}.ni-code-inner .cs2{color:var(--green)}.ni-code-inner .cn{color:var(--yellow)}.ni-code-inner .cc{color:var(--tx4)}.ni-code-inner .cv{color:var(--tx)}
  .ni-code-cursor{display:inline-block;width:5px;height:10px;background:var(--green);animation:blink 1s step-end infinite}
  @keyframes blink{0%,100%{opacity:1}50%{opacity:0}}

  /* Edge viz inside expand */
  .ni-edges{padding:5px 8px 2px;border-top:1px solid var(--border)}
  .ni-edge-item{display:flex;align-items:center;gap:4px;padding:2px 0;font:400 7px var(--mono);color:var(--tx3);animation:fi .2s ease}
  .ni-edge-arrow{color:var(--green);font-weight:700}
  .ni-edge-label{color:var(--cyan);font-style:italic}
  .ni-edge-target{color:var(--tx2)}
  .ni-mini-bar{height:2px;background:var(--border);margin:4px 0 2px;overflow:hidden}
  .ni-mini-bar .fill{height:100%;background:var(--green);transition:width .6s ease;width:0%}
  .ni-stats-row{display:flex;gap:8px;padding:3px 8px;font:400 7px var(--mono);color:var(--tx4)}
  .ni-stats-row .sv{color:var(--green);font-weight:600}

  .ftags{display:flex;gap:3px;padding:8px 12px 4px}
  .ft{padding:2px 6px;border:1px solid var(--border2);background:0;font:600 7px var(--mono);color:var(--tx4);cursor:pointer;text-transform:uppercase;letter-spacing:.04em;transition:all .1s}
  .ft:hover{border-color:var(--border3);color:var(--tx3)}.ft.on{border-color:var(--green);color:var(--green)}

  .nl{flex:1;overflow-y:auto;padding:4px 6px}
  .nl::-webkit-scrollbar{width:2px}.nl::-webkit-scrollbar-thumb{background:var(--border2)}
  .ng{font:600 7px var(--mono);color:var(--tx4);text-transform:uppercase;letter-spacing:.1em;padding:8px 6px 3px;display:flex;align-items:center;justify-content:space-between}
  .nb{font:600 7px var(--mono);color:var(--tx4);border:1px solid var(--border);padding:0 3px}
  .ni{display:flex;align-items:center;gap:7px;padding:5px 6px;cursor:pointer;transition:all .1s;border-left:2px solid transparent}
  .ni:hover{background:var(--bg3)}
  .ni.sel{background:var(--bg3);border-left-color:var(--green)}
  .nd{width:5px;height:5px;border-radius:50%;flex-shrink:0}
  .nf{flex:1;min-width:0}
  .nn{font:500 10px var(--mono);color:var(--tx);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .ns{font:400 8px var(--mono);color:var(--tx4)}
  .ne{font:400 8px var(--mono);color:var(--tx4);flex-shrink:0}

  .sts{display:flex;align-items:center;gap:12px;padding:0 12px;height:26px;border-top:1px solid var(--border);font:400 8px var(--mono);color:var(--tx4);flex-shrink:0}
  .sts .v{color:var(--green);font-weight:600}

  /* STATUSBAR */
  .sbar{grid-column:2/4;display:flex;align-items:center;gap:12px;padding:0 12px;border-top:1px solid var(--border);font:400 8px var(--mono);color:var(--tx4);text-transform:uppercase;letter-spacing:.04em}
  .sbar .v{color:var(--green);font-weight:600}
  .sbar .sep{flex:1}
  .pls{width:4px;height:4px;border-radius:50%;background:var(--green);animation:pl 2s ease infinite}
  @keyframes pl{0%,100%{opacity:1}50%{opacity:.3}}

  /* MAIN */
  .mn{display:flex;flex-direction:column;overflow:hidden}
  .ct{flex:1;display:grid;grid-template-columns:1fr 340px;grid-template-rows:1fr 280px;overflow:hidden}

  /* ARCH */
  .av{grid-row:1/3;position:relative;overflow:hidden;border-right:1px solid var(--border);background:var(--bg)}
  .av canvas{width:100%;height:100%;cursor:default}

  /* Mode toggle */
  .mode-bar{position:absolute;top:10px;left:12px;display:flex;gap:3px;z-index:5}
  .mode-btn{padding:3px 8px;border:1px solid var(--border2);background:var(--bg);font:600 8px var(--mono);color:var(--tx3);cursor:pointer;text-transform:uppercase;letter-spacing:.04em;transition:all .1s}
  .mode-btn:hover{color:var(--tx2);border-color:var(--border3)}
  .mode-btn.on{border-color:var(--green);color:var(--green)}

  .arch-tooltip{position:absolute;background:var(--bg3);border:1px solid var(--border3);padding:8px 10px;display:none;z-index:10;pointer-events:none;max-width:220px}
  .arch-tooltip.show{display:block}
  .att{font:600 10px var(--mono);color:var(--white);margin-bottom:2px}
  .ats{font:400 8px var(--mono);color:var(--tx2);line-height:1.5}

  /* ARCH EXPANDED CODE PANEL */
  .arch-panel{position:absolute;bottom:0;left:0;right:0;background:var(--bg2);border-top:1px solid var(--border3);z-index:15;max-height:0;overflow:hidden;transition:max-height .4s cubic-bezier(.4,0,.2,1),opacity .3s ease;opacity:0}
  .arch-panel.open{max-height:55%;opacity:1}
  .arch-panel-head{display:flex;align-items:center;justify-content:space-between;padding:8px 14px;border-bottom:1px solid var(--border);flex-shrink:0}
  .arch-panel-head .aph-left{display:flex;align-items:center;gap:8px}
  .arch-panel-head .aph-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0;animation:archPulse 1.5s ease infinite}
  @keyframes archPulse{0%,100%{box-shadow:0 0 0 0 var(--green)}50%{box-shadow:0 0 6px 2px var(--green)}}
  .arch-panel-head .aph-name{font:700 10px var(--mono);color:var(--white);text-transform:uppercase;letter-spacing:.06em}
  .arch-panel-head .aph-type{font:500 8px var(--mono);color:var(--tx3);text-transform:uppercase;letter-spacing:.04em;border:1px solid var(--border2);padding:1px 5px}
  .arch-panel-close{width:22px;height:22px;border:1px solid var(--border2);background:0;color:var(--tx3);cursor:pointer;font:11px var(--mono);display:flex;align-items:center;justify-content:center;transition:all .1s}
  .arch-panel-close:hover{border-color:var(--red);color:var(--red)}
  .arch-panel-body{display:flex;flex:1;overflow:hidden;height:calc(100% - 36px)}
  .arch-panel-code{flex:1;overflow-y:auto;padding:10px 14px;border-right:1px solid var(--border);font:400 9px var(--mono);line-height:1.8;color:var(--tx3)}
  .arch-panel-code::-webkit-scrollbar{width:2px}.arch-panel-code::-webkit-scrollbar-thumb{background:var(--border3)}
  .arch-panel-code .cline{display:block;white-space:nowrap;overflow:hidden}
  .arch-panel-code .ck{color:var(--purple)}.arch-panel-code .cf{color:var(--blue)}.arch-panel-code .cs2{color:var(--green)}.arch-panel-code .cn{color:var(--yellow)}.arch-panel-code .cc{color:var(--tx4)}.arch-panel-code .cv{color:var(--tx)}
  .arch-panel-info{width:200px;padding:10px 14px;overflow-y:auto;font:400 8px var(--mono);color:var(--tx3);line-height:1.7}
  .arch-panel-info::-webkit-scrollbar{width:2px}.arch-panel-info::-webkit-scrollbar-thumb{background:var(--border3)}
  .arch-panel-info .api-label{font:700 7px var(--mono);color:var(--tx2);text-transform:uppercase;letter-spacing:.08em;margin:8px 0 4px;display:block}
  .arch-panel-info .api-label:first-child{margin-top:0}
  .arch-panel-info .api-fn{display:block;color:var(--blue);padding:1px 0}
  .arch-panel-info .api-fn.write{color:var(--yellow)}
  .arch-panel-info .api-stat{display:flex;justify-content:space-between;padding:2px 0;border-bottom:1px solid var(--border)}
  .arch-panel-info .api-stat .val{color:var(--green);font-weight:600}
  .arch-code-cursor{display:inline-block;width:6px;height:11px;background:var(--green);animation:blink 1s step-end infinite}
  .arch-panel-progress{height:2px;background:var(--bg);position:relative;overflow:hidden}
  .arch-panel-progress .bar{height:100%;background:var(--green);width:0%;transition:width .15s linear}

  /* Legend */
  .gleg{position:absolute;bottom:10px;left:12px;display:flex;gap:10px;font:400 8px var(--mono);color:var(--tx4)}
  .gleg .v{font-weight:600}
  .gleg2{position:absolute;top:10px;right:12px;display:flex;gap:5px;flex-wrap:wrap}
  .gc{display:flex;align-items:center;gap:3px;font:500 7px var(--mono);color:var(--tx3);border:1px solid var(--border);padding:2px 5px;text-transform:uppercase;letter-spacing:.04em}
  .gc .d{width:4px;height:4px;border-radius:50%}

  /* Zoom */
  .gz{position:absolute;bottom:10px;right:12px;display:flex;gap:2px}
  .gzb{width:24px;height:24px;border:1px solid var(--border2);background:var(--bg);color:var(--tx3);cursor:pointer;display:flex;align-items:center;justify-content:center;font:500 12px var(--mono);transition:all .1s}
  .gzb:hover{border-color:var(--border3);color:var(--tx)}

  /* ASK */
  .ap{display:flex;flex-direction:column;border-bottom:1px solid var(--border);overflow:hidden}
  .sl{font:600 7px var(--mono);color:var(--tx3);text-transform:uppercase;letter-spacing:.1em;padding:8px 12px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;flex-shrink:0}
  .sl .lv{display:flex;align-items:center;gap:3px}
  .ab{flex:1;overflow-y:auto;padding:10px;display:flex;flex-direction:column;gap:8px}
  .ab::-webkit-scrollbar{width:2px}.ab::-webkit-scrollbar-thumb{background:var(--border2)}
  .mg{display:flex;gap:7px;animation:fi .2s ease}
  @keyframes fi{from{opacity:0;transform:translateY(3px)}to{opacity:1;transform:translateY(0)}}
  .ma{width:20px;height:20px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font:700 7px var(--mono);border:1px solid var(--border2)}
  .ma.u{color:var(--tx2)}.ma.a{color:var(--green);border-color:var(--green)}
  .mb{flex:1;min-width:0}
  .mw{font:600 7px var(--mono);color:var(--tx4);text-transform:uppercase;letter-spacing:.06em;margin-bottom:2px}
  .mt{font:400 10px var(--mono);line-height:1.6;color:var(--tx)}
  .mt code{color:var(--green);background:var(--bg3);border:1px solid var(--border);padding:0 2px;font-size:9px}
  .co{font:400 8px var(--mono);color:var(--tx3);background:var(--bg2);border:1px solid var(--border);border-left:2px solid var(--green);padding:6px 8px;margin-top:4px;line-height:1.6}
  .cs::before{content:"> ";color:var(--green)}
  .ty span{display:inline-block;width:3px;height:3px;background:var(--green);margin:0 1px;animation:tp 1.2s ease infinite}
  .ty span:nth-child(2){animation-delay:.2s}.ty span:nth-child(3){animation-delay:.4s}
  @keyframes tp{0%,100%{opacity:.2;transform:translateY(0)}50%{opacity:1;transform:translateY(-2px)}}
  .ai{padding:8px 10px;border-top:1px solid var(--border);flex-shrink:0}
  .aw{display:flex;align-items:center;gap:5px;border:1px solid var(--border2);padding:5px 8px;transition:border-color .12s}
  .aw:focus-within{border-color:var(--green)}
  .aw input{flex:1;border:none;outline:none;background:0;font:400 10px var(--mono);color:var(--tx)}
  .aw input::placeholder{color:var(--tx4)}
  .as{width:24px;height:24px;border:1px solid var(--green);background:0;color:var(--green);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .1s;flex-shrink:0}
  .as:hover{background:var(--green);color:var(--bg)}

  /* INGEST */
  .ip{display:flex;flex-direction:column;overflow:hidden}
  .ib{flex:1;padding:10px;display:flex;flex-direction:column;gap:6px;overflow-y:auto}
  .ib::-webkit-scrollbar{width:2px}.ib::-webkit-scrollbar-thumb{background:var(--border2)}
  .sbs{display:flex;gap:3px}
  .sbn{padding:2px 5px;border:1px solid var(--border2);background:0;font:400 7px var(--mono);color:var(--tx3);cursor:pointer;text-transform:uppercase;letter-spacing:.04em;transition:all .1s}
  .sbn:hover{border-color:var(--border3);color:var(--tx2)}
  .it{width:100%;min-height:50px;border:1px solid var(--border2);padding:7px 9px;font:400 10px var(--mono);line-height:1.5;color:var(--tx);background:var(--bg2);resize:vertical;outline:none;transition:border-color .12s}
  .it:focus{border-color:var(--green)}.it::placeholder{color:var(--tx4)}
  .ifo{display:flex;align-items:center;justify-content:space-between}
  .ifo .me{font:400 8px var(--mono);color:var(--tx4)}
  .ig{display:flex;align-items:center;gap:3px;padding:4px 10px;border:1px solid var(--green);background:0;color:var(--green);font:600 8px var(--mono);cursor:pointer;transition:all .1s;text-transform:uppercase;letter-spacing:.04em}
  .ig:hover{background:var(--green);color:var(--bg)}.ig:disabled{opacity:.3;cursor:default}
  .il{flex:1;overflow-y:auto}
  .il::-webkit-scrollbar{width:2px}.il::-webkit-scrollbar-thumb{background:var(--border2)}
  .le{display:flex;align-items:flex-start;gap:5px;padding:3px 0;font:400 8px var(--mono);color:var(--tx2);animation:fi .2s ease}
  .le .t{color:var(--tx4);flex-shrink:0;font-size:7px;margin-top:1px}
  .le .tg{font-size:6px;font-weight:700;padding:1px 3px;flex-shrink:0;text-transform:uppercase;letter-spacing:.04em;border:1px solid}
  .tg-extract{color:var(--blue);border-color:var(--blue)}.tg-dedup{color:var(--yellow);border-color:var(--yellow)}
  .tg-link{color:var(--green);border-color:var(--green)}.tg-store{color:var(--tx2);border-color:var(--tx3)}
  .tg-embed{color:var(--purple);border-color:var(--purple)}

  /* MODAL */
  .mo{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:100;display:none;align-items:center;justify-content:center}
  .mo.show{display:flex}
  .md{background:var(--bg2);border:1px solid var(--border2);width:380px;max-width:90vw;animation:mIn .15s ease}
  @keyframes mIn{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}
  .mh{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border-bottom:1px solid var(--border)}
  .mh h3{font:700 9px var(--mono);text-transform:uppercase;letter-spacing:.06em;color:var(--white)}
  .mx{width:20px;height:20px;border:none;background:0;color:var(--tx3);cursor:pointer;font:11px var(--mono);display:flex;align-items:center;justify-content:center}.mx:hover{color:var(--tx)}
  .mbd{padding:12px}
  .mbd .fd{margin-bottom:8px}
  .mbd label{display:block;font:600 7px var(--mono);color:var(--tx3);text-transform:uppercase;letter-spacing:.06em;margin-bottom:3px}
  .mbd input,.mbd select{width:100%;padding:5px 7px;border:1px solid var(--border2);background:var(--bg);font:400 10px var(--mono);color:var(--tx);outline:none}
  .mbd input:focus,.mbd select:focus{border-color:var(--green)}.mbd select option{background:var(--bg2)}
  .mbd p{font:400 9px var(--mono);color:var(--tx3);margin-bottom:8px;line-height:1.5}
  .mf{display:flex;justify-content:flex-end;gap:4px;padding:8px 12px;border-top:1px solid var(--border)}

  ::-webkit-scrollbar{width:2px}::-webkit-scrollbar-track{background:var(--bg)}::-webkit-scrollbar-thumb{background:var(--border3)}
</style>
</head>
<body>
<!-- LOADING SCREEN -->
<div class="loader" id="loader">
  <div class="loader-grid"></div>
  <div class="loader-inner">
    <div class="loader-logo">GRAPHISTA <span style="font-size:12px;color:var(--tx3);font-weight:400;letter-spacing:.06em">by Pippin</span></div>
    <div class="loader-sub">Dynamic Graph-Based LLM-Powered Memory System</div>
    <div class="loader-lines" id="loaderLines"></div>
    <div class="loader-bar"><div class="fill" id="loaderBar"></div></div>
    <div class="loader-status" id="loaderStatus">initializing...</div>
    <button class="loader-enter" id="loaderEnter" onclick="enterApp()">Enter Dashboard →</button>
  </div>
</div>

<div class="app" id="appMain">
  <nav class="rail">
    <img src="data:image/jpeg;base64,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" alt="Logo" style="width:36px;height:36px;border-radius:6px;margin-bottom:4px;object-fit:cover;flex-shrink:0">
    <button class="rb on" data-v="arch"><span class="tp">System</span><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="5" r="3"/><circle cx="5" cy="19" r="3"/><circle cx="19" cy="19" r="3"/><line x1="12" y1="8" x2="5" y2="16"/><line x1="12" y1="8" x2="19" y2="16"/></svg></button>
    <button class="rb" data-v="graph"><span class="tp">Graph</span><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M8 12l2 2 4-4"/></svg></button>
    <button class="rb" data-v="ingest"><span class="tp">Ingest</span><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3v12m0 0l-4-4m4 4l4-4"/><path d="M4 17v2a2 2 0 002 2h12a2 2 0 002-2v-2"/></svg></button>
    <button class="rb" data-v="query"><span class="tp">Query</span><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg></button>
    <div class="rsp"></div>
    <button class="rb" id="setBtn"><span class="tp">Config</span><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v4m0 14v4m-7.07-15.07l2.83 2.83m8.48 8.48l2.83 2.83M1 12h4m14 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"/></svg></button>
  </nav>

  <header class="topbar">
    <div class="tl"><span class="tt">graphista</span><span style="color:var(--tx4)">//</span><span class="tc" id="crumb">system_architecture</span><div class="ca-tag" id="caTag"><span class="ca-dot"></span><span class="ca-lbl">CA</span><span class="ca-addr" id="caAddr">E7AaqmGaPsYxBzWERpgigt75nNs99eZEBUjKYA3cpump</span><button class="ca-cp" id="caCopy" onclick="copyCA()">Copy</button><a class="ca-xb" id="caX" href="https://pump.fun/coin/E7AaqmGaPsYxBzWERpgigt75nNs99eZEBUjKYA3cpump" target="_blank">↗</a></div></div>
    <div class="tr"><a class="tb" href="https://x.com/i/communities/2022344299363643738" target="_blank"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>X</a><a class="tb" href="https://github.com/pippinlovesyou/graphista" target="_blank"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>GitHub</a><a class="tb" href="graphista-visualizer.html" target="_blank"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/><line x1="12" y1="2" x2="12" y2="5"/><line x1="12" y1="19" x2="12" y2="22"/><line x1="2" y1="12" x2="5" y2="12"/><line x1="19" y1="12" x2="22" y2="12"/></svg>Visualizer</a><a class="tb" href="graphista-contribute.html" target="_blank"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>Contribute</a><a class="tb" href="graphista-docs.html" target="_blank"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>Docs</a><button class="tb" id="expBtn"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>Export</button><button class="tb p" id="ingBtn"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>Ingest</button></div>
  </header>

  <aside class="left">
    <div class="credit">
      <div class="credit-title"><div class="pls"></div>Originally built by Pippin</div>
      <div class="credit-sub">Graphista: LLM-powered graph-based memory system. Open source under MIT license.</div>
      <div class="credit-links">
        <a href="https://github.com/pippinlovesyou/graphista" target="_blank" class="credit-link"><svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>GitHub</a>
        <a href="graphista-docs.html" target="_blank" class="credit-link"><svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>Docs</a>
      </div>
    </div>
    <div class="lh">
      <h2>memory_graph</h2>
      <div class="sb"><span style="color:var(--green);font-size:9px">></span><input placeholder="search..." id="nSrch"></div>
    </div>
    <div class="ftags">
      <button class="ft on" data-f="all">All</button>
      <button class="ft" data-f="person">Person</button>
      <button class="ft" data-f="company">Company</button>
      <button class="ft" data-f="concept">Concept</button>
    </div>
    <div class="nl" id="nl"></div>
    <div class="sts"><span><span class="v" id="sN">20</span> nodes</span><span><span class="v" id="sE">38</span> edges</span><span><span class="v" id="sD">8</span> docs</span></div>
  </aside>

  <main class="mn">
    <div class="ct">
      <div class="av" id="archView">
        <canvas id="C"></canvas>
        <div class="mode-bar">
          <button class="mode-btn on" data-mode="arch">System</button>
          <button class="mode-btn" data-mode="ingestMap">Ingest Flow</button>
          <button class="mode-btn" data-mode="queryMap">Query Flow</button>
          <button class="mode-btn" data-mode="dataMap">Data Layer</button>
          <button class="mode-btn" data-mode="graph">Force Graph</button>
        </div>
        <div class="gleg"><span><span class="v" id="sN2">20</span> nodes</span><span><span class="v" id="sE2">38</span> edges</span><span>graphista v0.1.0</span></div>
        <div class="gleg2">
          <div class="gc"><div class="d" style="background:#4488ff"></div>Person</div>
          <div class="gc"><div class="d" style="background:#aa66ff"></div>Company</div>
          <div class="gc"><div class="d" style="background:#ffcc00"></div>Concept</div>
        </div>
        <div class="gz">
          <button class="gzb" id="zI">+</button>
          <button class="gzb" id="zO">−</button>
          <button class="gzb" id="zR">↺</button>
        </div>
        <div class="arch-tooltip" id="atp"><div class="att" id="atpN"></div><div class="ats" id="atpD"></div></div>
        <!-- Expandable code panel -->
        <div class="arch-panel" id="archPanel">
          <div class="arch-panel-head">
            <div class="aph-left">
              <div class="aph-dot" id="apDot" style="background:var(--green)"></div>
              <span class="aph-name" id="apName">—</span>
              <span class="aph-type" id="apType">module</span>
            </div>
            <button class="arch-panel-close" id="apClose">×</button>
          </div>
          <div class="arch-panel-progress"><div class="bar" id="apBar"></div></div>
          <div class="arch-panel-body">
            <div class="arch-panel-code" id="apCode"></div>
            <div class="arch-panel-info" id="apInfo"></div>
          </div>
        </div>
      </div>

      <div class="ap">
        <div class="sl">section_001 // smart_retrieval <div class="lv"><div class="pls"></div>llm</div></div>
        <div class="ab" id="aB">
          <div class="mg"><div class="ma a">G</div><div class="mb"><div class="mw">graphista_engine</div><div class="mt">> System online. Query via chain-of-thought traversal. Try <code>Who is CZ?</code> or <code>What connects to DeFi?</code></div></div></div>
        </div>
        <div class="ai"><div class="aw"><span style="color:var(--green);font-size:9px">></span><input placeholder="ask the graph..." id="aIn"><button class="as" id="aSend"><svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M22 2L11 13"/><path d="M22 2L15 22l-4-9-9-4z"/></svg></button></div></div>
      </div>

      <div class="ip">
        <div class="sl">section_002 // ingest_pipeline <div class="lv"><div class="pls"></div>ready</div></div>
        <div class="ib">
          <div class="sbs"><button class="sbn" data-s="crypto">Crypto</button><button class="sbn" data-s="ai">AI</button><button class="sbn" data-s="defi">DeFi</button><button class="sbn" data-s="nft">NFT</button></div>
          <textarea class="it" id="iT" placeholder="> paste text for LLM ingestion..."></textarea>
          <div class="ifo"><span class="me" id="iM">> ready_</span><button class="ig" id="iG">▶ Process</button></div>
          <div class="il" id="iL"></div>
        </div>
      </div>
    </div>
  </main>

  <footer class="sbar">
    <span>graphista <span class="v">v0.1.0</span></span>
    <span>backend: <span class="v">local_json</span></span>
    <span>model: <span class="v">gpt-4o</span></span>
    <span class="sep"></span>
    <div class="pls"></div>
    <span>system <span class="v">online</span></span>
  </footer>
</div>

<div class="mo" id="setMo"><div class="md"><div class="mh"><h3>// Config</h3><button class="mx" onclick="setMo.classList.remove('show')">×</button></div><div class="mbd"><div class="fd"><label>API Key</label><input value="sk-••••••••demo"></div><div class="fd"><label>Model</label><select><option selected>gpt-4o</option><option>gpt-4-turbo</option><option>gpt-3.5-turbo</option></select></div><div class="fd"><label>Backend</label><select><option selected>Local (JSON)</option><option>Neo4j</option><option>FalkorDB</option></select></div><div class="fd"><label>Temperature</label><input value="0.0"></div></div><div class="mf"><button class="tb" onclick="setMo.classList.remove('show')">Cancel</button><button class="tb p" onclick="setMo.classList.remove('show')">Save</button></div></div></div>
<div class="mo" id="expMo"><div class="md"><div class="mh"><h3>// Export</h3><button class="mx" onclick="expMo.classList.remove('show')">×</button></div><div class="mbd"><p>> download graph data.</p><div class="fd"><label>Format</label><select id="eFmt"><option>JSON</option><option>CSV</option><option>Neo4j Cypher</option></select></div></div><div class="mf"><button class="tb" onclick="expMo.classList.remove('show')">Cancel</button><button class="tb p" id="dExp">Download</button></div></div></div>

<script>
const COL={person:'#4488ff',company:'#aa66ff',concept:'#ffcc00',document:'#00ff88'};

const N=[
  {id:0,l:'Vitalik Buterin',t:'person',s:'Co-founder Ethereum',p:{role:'Co-founder',project:'Ethereum'}},
  {id:1,l:'Satoshi Nakamoto',t:'person',s:'Creator of Bitcoin',p:{role:'Creator',project:'Bitcoin'}},
  {id:2,l:'Anatoly Yakovenko',t:'person',s:'CEO Solana Labs',p:{role:'CEO',project:'Solana'}},
  {id:3,l:'CZ',t:'person',s:'Founder Binance',p:{role:'Founder',project:'Binance'}},
  {id:4,l:'Sam Bankman-Fried',t:'person',s:'Former CEO FTX',p:{role:'Former CEO',project:'FTX'}},
  {id:5,l:'Do Kwon',t:'person',s:'Founder Terra/Luna',p:{role:'Founder',project:'Terra'}},
  {id:6,l:'Andre Cronje',t:'person',s:'Creator Yearn',p:{role:'Creator',project:'Yearn Finance'}},
  {id:7,l:'Hayden Adams',t:'person',s:'Creator Uniswap',p:{role:'Creator',project:'Uniswap'}},
  {id:8,l:'Brian Armstrong',t:'person',s:'CEO Coinbase',p:{role:'CEO',project:'Coinbase'}},
  {id:9,l:'Charles Hoskinson',t:'person',s:'Founder Cardano',p:{role:'Founder',project:'Cardano'}},
  {id:10,l:'Gavin Wood',t:'person',s:'Founder Polkadot',p:{role:'Founder',project:'Polkadot'}},
  {id:11,l:'Ethereum Foundation',t:'company',s:'Non-profit',p:{industry:'L1 Blockchain'}},
  {id:12,l:'Solana Labs',t:'company',s:'Protocol',p:{consensus:'PoH+PoS'}},
  {id:13,l:'Binance',t:'company',s:'Exchange',p:{volume:'$76B'}},
  {id:14,l:'Coinbase',t:'company',s:'Exchange (Public)',p:{ticker:'COIN'}},
  {id:15,l:'Uniswap Labs',t:'company',s:'DEX Protocol',p:{tvl:'$5B+'}},
  {id:16,l:'Proof of Stake',t:'concept',s:'Consensus',p:{category:'Consensus'}},
  {id:17,l:'Smart Contracts',t:'concept',s:'Technology',p:{category:'Tech'}},
  {id:18,l:'DeFi',t:'concept',s:'Decentralized Finance',p:{tvl:'$80B+'}},
  {id:19,l:'Graph Memory',t:'concept',s:'AI Knowledge Graph',p:{framework:'Graphista'}},
];

const E=[
  {s:0,t:11,l:'co-founded'},{s:0,t:17,l:'created'},{s:0,t:16,l:'proposed'},{s:0,t:18,l:'enabled'},{s:0,t:10,l:'worked_with'},
  {s:1,t:16,l:'inspired'},{s:1,t:17,l:'influenced'},
  {s:2,t:12,l:'founded'},{s:2,t:16,l:'uses'},
  {s:3,t:13,l:'founded'},{s:3,t:18,l:'invested'},
  {s:4,t:18,l:'exploited'},{s:4,t:13,l:'rivaled'},
  {s:5,t:16,l:'misused'},{s:5,t:18,l:'collapsed'},
  {s:6,t:18,l:'pioneered'},{s:6,t:17,l:'built_on'},
  {s:7,t:15,l:'created'},{s:7,t:18,l:'pioneered_amm'},
  {s:8,t:14,l:'founded'},{s:8,t:18,l:'onboarded'},
  {s:9,t:16,l:'designed'},{s:9,t:11,l:'co-founded'},
  {s:10,t:17,l:'designed'},{s:10,t:11,l:'co-founded'},
  {s:11,t:17,l:'maintains'},{s:11,t:18,l:'powers'},{s:11,t:16,l:'uses'},
  {s:12,t:16,l:'uses'},{s:12,t:18,l:'supports'},
  {s:13,t:18,l:'exchange'},{s:13,t:3,l:'led_by'},
  {s:14,t:18,l:'provides'},{s:15,t:18,l:'powers_amm'},
  {s:16,t:18,l:'enables'},{s:17,t:18,l:'powers'},{s:19,t:17,l:'relates'},{s:19,t:18,l:'supports'},
];

const SAMP={
  crypto:"Solana was founded by Anatoly Yakovenko. It uses Proof of History combined with Proof of Stake. Jupiter is the leading DEX on Solana. Raydium provides liquidity pools.",
  ai:"OpenAI released GPT-4. Anthropic developed Claude. Google created Gemini by merging DeepMind and Brain. Yohei Nakajima created BabyAGI and Graphista.",
  defi:"Uniswap pioneered AMMs. Aave enables flash loans. MakerDAO issues DAI stablecoin. Compound introduced algorithmic rates. Curve optimizes stablecoin swaps.",
  nft:"Yuga Labs created Bored Ape Yacht Club. Larva Labs made CryptoPunks. Art Blocks pioneered generative art. Blur became the top NFT marketplace."
};

const QA=[
  {q:/solana|anatoly/i,cot:["scan: 'Solana'","match: Solana Labs [Company], Anatoly Yakovenko [Person]","edge: Anatoly → founded → Solana Labs","edges: uses → PoS, supports → DeFi"],a:"Solana Labs was founded by Anatoly Yakovenko. Uses PoH + PoS consensus. Connected to DeFi ecosystem through direct relationships."},
  {q:/defi|finance/i,cot:["query: DeFi [Concept]","highest connectivity: 10+ edges","powered by: Smart Contracts, Ethereum","enabled by: Proof of Stake","connected: Uniswap, Binance, Coinbase, Solana"],a:"DeFi is the most connected node (10+ edges). Powered by Smart Contracts + Ethereum, enabled by PoS. Key players: Uniswap (AMM pioneer), Andre Cronje (Yearn), Hayden Adams (Uniswap)."},
  {q:/vitalik|ethereum/i,cot:["locate: Vitalik [Person]","5 edges: co-founded ETH, created Smart Contracts","proposed PoS, enabled DeFi, worked with Gavin Wood"],a:"Vitalik Buterin co-founded Ethereum Foundation with Charles Hoskinson and Gavin Wood. Created Smart Contracts, proposed PoS, enabled the entire DeFi ecosystem."},
  {q:/cz|binance/i,cot:["locate: CZ [Person], Binance [Company]","CZ → founded → Binance","Binance → exchange → DeFi","rival: FTX (SBF)","volume: $76B"],a:"CZ founded Binance ($76B volume). Connected to DeFi through exchange relationship. Graph shows rivalry with FTX/SBF."},
  {q:/sbf|ftx|bankman/i,cot:["locate: Sam Bankman-Fried [Person]","→ exploited → DeFi","→ rivaled → Binance","status: Former CEO, FTX collapsed"],a:"SBF was Former CEO of FTX. Graph shows he exploited DeFi and rivaled Binance. FTX collapsed, marking one of crypto's biggest failures."},
  {q:/uniswap|hayden/i,cot:["locate: Hayden Adams [Person]","→ created → Uniswap Labs","→ pioneered_amm → DeFi","Uniswap Labs TVL: $5B+"],a:"Hayden Adams created Uniswap, pioneering the AMM model. Uniswap Labs holds $5B+ TVL and powers DeFi through automated market making."},
  {q:/graph|memory|graphista/i,cot:["locate: Graph Memory [Concept]","framework: Graphista","→ relates → Smart Contracts","→ supports → DeFi"],a:"Graph Memory is the AI concept powering Graphista — LLM-driven graph-based knowledge management. Relates to Smart Contracts and supports DeFi knowledge retrieval."},
  {q:/gavin|polkadot/i,cot:["locate: Gavin Wood [Person]","→ co-founded → Ethereum Foundation","→ designed → Smart Contracts","founder of Polkadot"],a:"Gavin Wood co-founded Ethereum and designed Smart Contracts alongside Vitalik. Later founded Polkadot as an interoperability protocol."},
  {q:/andre|yearn/i,cot:["locate: Andre Cronje [Person]","→ pioneered → DeFi","→ built_on → Smart Contracts","creator of Yearn Finance"],a:"Andre Cronje pioneered DeFi yield aggregation with Yearn Finance, building on Smart Contracts. One of DeFi's most influential builders."},
];
const DQA={cot:["parsing...","scanning 20 nodes...","traversing 38 edges...","ranking results..."],a:"Traversed 20 nodes, 38 edges. Try: Solana, DeFi, Vitalik, CZ, SBF, Uniswap, Gavin Wood, Andre Cronje, Graph Memory."};

// Code snippets per person (simulated processing code)
const CODE_SNIPPETS = {
  'Vitalik Buterin': [
    '<span class="cc">// SmartNodeProcessor: processing entity</span>',
    '<span class="ck">from</span> <span class="cf">memory</span> <span class="ck">import</span> Memory',
    '<span class="cv">node</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"name"</span>, <span class="cs2">"Vitalik Buterin"</span>)',
    '<span class="cv">edges</span> = memory.db.<span class="cf">get_edges</span>(node.id)',
    '<span class="cc"># Found 5 connections: ETH Foundation, Smart Contracts, PoS, DeFi, Gavin Wood</span>',
    '<span class="cv">embedding</span> = <span class="cf">generate_embedding</span>(node.properties)',
    '<span class="cv">similar</span> = memory.db.<span class="cf">find_similar_nodes</span>(embedding, k=<span class="cn">3</span>)',
    '<span class="cc"># Matched: Charles Hoskinson (0.94), Gavin Wood (0.91)</span>',
    'memory.db.<span class="cf">update_node</span>(node.id, {<span class="cs2">"role"</span>: <span class="cs2">"Co-founder"</span>, <span class="cs2">"influence"</span>: <span class="cn">0.98</span>})',
  ],
  'Satoshi Nakamoto': [
    '<span class="cc">// SmartRetrievalTool: chain-of-thought query</span>',
    '<span class="cv">result</span> = memory.<span class="cf">ask</span>(<span class="cs2">"Who created Bitcoin?"</span>)',
    '<span class="cc"># Step 1: Scanning nodes for Bitcoin reference...</span>',
    '<span class="cc"># Step 2: Found Satoshi Nakamoto [Person]</span>',
    '<span class="cv">edges</span> = memory.db.<span class="cf">get_edges</span>(<span class="cs2">"satoshi_001"</span>)',
    '<span class="cc"># → inspired → Proof of Stake</span>',
    '<span class="cc"># → influenced → Smart Contracts</span>',
    '<span class="cv">result</span>[<span class="cs2">"chain_of_thought"</span>].append(<span class="cs2">"identity: pseudonymous"</span>)',
    '<span class="ck">return</span> {<span class="cs2">"final_answer"</span>: <span class="cs2">"Satoshi Nakamoto"</span>, <span class="cs2">"confidence"</span>: <span class="cn">1.0</span>}',
  ],
  'Anatoly Yakovenko': [
    '<span class="cc">// ingest(): processing Solana founder data</span>',
    '<span class="cv">doc</span> = memory.<span class="cf">ingest</span>(<span class="cs2">"Anatoly Yakovenko founded Solana Labs in 2017"</span>)',
    '<span class="cc"># SmartNodeProcessor: extracting entities...</span>',
    '<span class="cc"># Entity 1: Anatoly Yakovenko [Person]</span>',
    '<span class="cc"># Entity 2: Solana Labs [Company]</span>',
    'memory.db.<span class="cf">create_edge</span>(<span class="cs2">"anatoly"</span>, <span class="cs2">"solana"</span>, <span class="cs2">"founded"</span>)',
    '<span class="cv">vec</span> = <span class="cf">embed</span>(<span class="cs2">"Proof of History consensus mechanism"</span>)',
    'memory.db.<span class="cf">batch_create_edges</span>([{<span class="cs2">"src"</span>:<span class="cs2">"solana"</span>,<span class="cs2">"tgt"</span>:<span class="cs2">"pos"</span>,<span class="cs2">"rel"</span>:<span class="cs2">"uses"</span>}])',
    '<span class="cc"># Graph updated: +2 nodes, +3 edges</span>',
  ],
  'CZ': [
    '<span class="cc">// vector_search(): finding CZ connections</span>',
    '<span class="cv">query_vec</span> = <span class="cf">embed</span>(<span class="cs2">"Changpeng Zhao Binance founder"</span>)',
    '<span class="cv">results</span> = memory.db.<span class="cf">vector_search</span>(query_vec, k=<span class="cn">5</span>)',
    '<span class="cc"># [0] Binance (score: 0.97)</span>',
    '<span class="cc"># [1] DeFi (score: 0.82)</span>',
    '<span class="cc"># [2] SBF/FTX (score: 0.79) — rivalry detected</span>',
    '<span class="cv">node</span> = memory.db.<span class="cf">get_node</span>(<span class="cs2">"cz_001"</span>)',
    'memory.db.<span class="cf">update_node</span>(<span class="cs2">"cz_001"</span>, {<span class="cs2">"volume"</span>: <span class="cs2">"$76B"</span>, <span class="cs2">"status"</span>: <span class="cs2">"active"</span>})',
    '<span class="ck">print</span>(<span class="cs2">"Edges:"</span>, <span class="cn">4</span>, <span class="cs2">"| Influence:"</span>, <span class="cn">0.95</span>)',
  ],
  'Sam Bankman-Fried': [
    '<span class="cc">// WARNING: anomaly detected in node processing</span>',
    '<span class="cv">node</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"name"</span>, <span class="cs2">"SBF"</span>)',
    '<span class="cv">status</span> = node.properties[<span class="cs2">"status"</span>]  <span class="cc"># "convicted"</span>',
    '<span class="cv">edges</span> = memory.db.<span class="cf">get_edges</span>(node.id)',
    '<span class="cc"># → exploited → DeFi</span>',
    '<span class="cc"># → rivaled → Binance</span>',
    'memory.db.<span class="cf">update_node</span>(node.id, {<span class="cs2">"risk_flag"</span>: <span class="cn">True</span>, <span class="cs2">"entity_status"</span>: <span class="cs2">"defunct"</span>})',
    '<span class="cc"># FTX collapse: $8B customer funds missing</span>',
    '<span class="cv">alert</span> = <span class="cf">flag_anomaly</span>(<span class="cs2">"high_risk_entity"</span>, severity=<span class="cn">10</span>)',
  ],
  'Do Kwon': [
    '<span class="cc">// SmartNodeProcessor: Terra/Luna collapse analysis</span>',
    '<span class="cv">terra</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"name"</span>, <span class="cs2">"Terra"</span>)',
    '<span class="cv">luna</span> = memory.db.<span class="cf">query</span>({<span class="cs2">"label"</span>: <span class="cs2">"Token"</span>, <span class="cs2">"name"</span>: <span class="cs2">"LUNA"</span>})',
    '<span class="cc"># UST depeg event: May 2022</span>',
    '<span class="cc"># $40B market cap → $0 in 72 hours</span>',
    'memory.db.<span class="cf">create_edge</span>(<span class="cs2">"do_kwon"</span>, <span class="cs2">"defi"</span>, <span class="cs2">"collapsed"</span>)',
    'memory.db.<span class="cf">update_node</span>(<span class="cs2">"do_kwon"</span>, {<span class="cs2">"status"</span>: <span class="cs2">"arrested"</span>})',
    '<span class="cc"># Cascading edges: 14 connected nodes affected</span>',
  ],
  'Andre Cronje': [
    '<span class="cc">// ingest(): Yearn Finance protocol data</span>',
    '<span class="cv">doc</span> = memory.<span class="cf">ingest</span>(<span class="cs2">"Andre Cronje built Yearn Finance yield aggregator"</span>)',
    '<span class="cv">node</span> = memory.db.<span class="cf">create_node</span>(<span class="cs2">"Person"</span>, {<span class="cs2">"name"</span>: <span class="cs2">"Andre Cronje"</span>})',
    'memory.db.<span class="cf">create_edge</span>(node.id, <span class="cs2">"defi"</span>, <span class="cs2">"pioneered"</span>)',
    'memory.db.<span class="cf">create_edge</span>(node.id, <span class="cs2">"smart_contracts"</span>, <span class="cs2">"built_on"</span>)',
    '<span class="cv">yield_vaults</span> = memory.db.<span class="cf">get_connected_nodes</span>(node.id)',
    '<span class="cc"># DeFi Summer 2020: Yearn TVL peaked $6.9B</span>',
    '<span class="cc"># Connected protocols: Aave, Compound, Curve</span>',
  ],
  'Hayden Adams': [
    '<span class="cc">// SmartNodeProcessor: Uniswap AMM analysis</span>',
    '<span class="cv">uni</span> = memory.db.<span class="cf">create_node</span>(<span class="cs2">"Company"</span>, {<span class="cs2">"name"</span>: <span class="cs2">"Uniswap Labs"</span>})',
    '<span class="cv">hayden</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"name"</span>, <span class="cs2">"Hayden Adams"</span>)',
    'memory.db.<span class="cf">create_edge</span>(hayden.id, uni.id, <span class="cs2">"created"</span>)',
    '<span class="cc"># x*y=k constant product formula</span>',
    '<span class="cv">amm_vec</span> = <span class="cf">embed</span>(<span class="cs2">"automated market maker liquidity pool"</span>)',
    'memory.db.<span class="cf">update_node</span>(uni.id, {<span class="cs2">"tvl"</span>: <span class="cs2">"$5B+"</span>, <span class="cs2">"version"</span>: <span class="cs2">"v4"</span>})',
    '<span class="cc"># Uniswap v4: hooks, singleton pool architecture</span>',
  ],
  'Brian Armstrong': [
    '<span class="cc">// query(): Coinbase public company data</span>',
    '<span class="cv">coinbase</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"ticker"</span>, <span class="cs2">"COIN"</span>)',
    '<span class="cv">brian</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"name"</span>, <span class="cs2">"Brian Armstrong"</span>)',
    '<span class="cc"># IPO: April 14, 2021 — NASDAQ direct listing</span>',
    'memory.db.<span class="cf">create_edge</span>(brian.id, coinbase.id, <span class="cs2">"founded"</span>)',
    'memory.db.<span class="cf">create_edge</span>(coinbase.id, <span class="cs2">"defi"</span>, <span class="cs2">"provides"</span>)',
    '<span class="cv">regulatory</span> = memory.db.<span class="cf">get_connected_nodes</span>(coinbase.id, <span class="cs2">"regulatory"</span>)',
    '<span class="cc"># 110M+ verified users globally</span>',
  ],
  'Charles Hoskinson': [
    '<span class="cc">// SmartRetrievalTool: Cardano analysis</span>',
    '<span class="cv">charles</span> = memory.db.<span class="cf">get_node</span>(<span class="cs2">"hoskinson_001"</span>)',
    '<span class="cv">edges</span> = memory.db.<span class="cf">get_edges</span>(charles.id)',
    '<span class="cc"># → co-founded → Ethereum Foundation (early)</span>',
    '<span class="cc"># → designed → Proof of Stake (Ouroboros)</span>',
    '<span class="cv">cardano</span> = memory.db.<span class="cf">find_similar_nodes</span>(<span class="cf">embed</span>(<span class="cs2">"Cardano ADA"</span>), k=<span class="cn">1</span>)',
    'memory.db.<span class="cf">batch_update_nodes</span>([{<span class="cs2">"id"</span>: charles.id, <span class="cs2">"academic"</span>: <span class="cn">True</span>}])',
    '<span class="cc"># Peer-reviewed blockchain research approach</span>',
  ],
  'Gavin Wood': [
    '<span class="cc">// ingest(): Polkadot interoperability data</span>',
    '<span class="cv">gavin</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"name"</span>, <span class="cs2">"Gavin Wood"</span>)',
    '<span class="cc"># Co-founded Ethereum, invented Solidity language</span>',
    'memory.db.<span class="cf">create_edge</span>(gavin.id, <span class="cs2">"eth_foundation"</span>, <span class="cs2">"co-founded"</span>)',
    '<span class="cv">dot</span> = memory.db.<span class="cf">create_node</span>(<span class="cs2">"Company"</span>, {<span class="cs2">"name"</span>: <span class="cs2">"Polkadot"</span>})',
    'memory.db.<span class="cf">create_edge</span>(gavin.id, dot.id, <span class="cs2">"founded"</span>)',
    '<span class="cc"># Substrate framework: 150+ parachains</span>',
    '<span class="cv">influence</span> = <span class="cf">calculate_centrality</span>(gavin.id)  <span class="cc"># 0.92</span>',
  ],
};

// Default code for any person without specific snippet
const DEFAULT_CODE = [
  '<span class="cc">// SmartNodeProcessor: analyzing entity</span>',
  '<span class="cv">node</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"name"</span>, <span class="cs2">"$NAME"</span>)',
  '<span class="cv">edges</span> = memory.db.<span class="cf">get_edges</span>(node.id)',
  '<span class="cv">embedding</span> = <span class="cf">generate_embedding</span>(node.properties)',
  '<span class="cv">similar</span> = memory.db.<span class="cf">find_similar_nodes</span>(embedding, k=<span class="cn">3</span>)',
  'memory.db.<span class="cf">update_node</span>(node.id, {<span class="cs2">"processed"</span>: <span class="cn">True</span>})',
  '<span class="cc"># Graph traversal complete</span>',
];

// Company code snippets
const COMPANY_CODE = {
  'Ethereum Foundation': [
    '<span class="cc">// query(): Ethereum Foundation graph analysis</span>',
    '<span class="cv">eth</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"name"</span>, <span class="cs2">"Ethereum Foundation"</span>)',
    '<span class="cv">edges</span> = memory.db.<span class="cf">get_edges</span>(eth.id)  <span class="cc"># 6 connections</span>',
    '<span class="cc"># maintains → Smart Contracts</span>',
    '<span class="cc"># powers → DeFi</span>',
    '<span class="cc"># uses → Proof of Stake (The Merge, Sep 2022)</span>',
    '<span class="cv">founders</span> = memory.db.<span class="cf">query</span>(<span class="cs2">"MATCH (p)-[:co_founded]->(eth) RETURN p"</span>)',
    '<span class="cc"># [Vitalik Buterin, Charles Hoskinson, Gavin Wood]</span>',
    '<span class="cv">centrality</span> = <span class="cf">calculate_pagerank</span>(eth.id)  <span class="cc"># 0.96</span>',
    '<span class="cc"># Highest centrality node in the blockchain graph</span>',
  ],
  'Solana Labs': [
    '<span class="cc">// SmartRetrievalTool: Solana ecosystem mapping</span>',
    '<span class="cv">sol</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"name"</span>, <span class="cs2">"Solana Labs"</span>)',
    '<span class="cv">props</span> = sol.properties  <span class="cc"># {consensus: "PoH+PoS"}</span>',
    '<span class="cv">connected</span> = memory.db.<span class="cf">get_connected_nodes</span>(sol.id)',
    '<span class="cc"># → uses → Proof of Stake</span>',
    '<span class="cc"># → supports → DeFi</span>',
    '<span class="cc"># Founded by Anatoly Yakovenko, 2017</span>',
    '<span class="cv">tps</span> = <span class="cn">65000</span>  <span class="cc"># theoretical max TPS</span>',
    '<span class="cv">ecosystem</span> = memory.db.<span class="cf">vector_search</span>(<span class="cs2">"Solana DeFi protocols"</span>, k=<span class="cn">10</span>)',
    '<span class="cc"># Jupiter, Raydium, Marinade, Orca, Drift...</span>',
  ],
  'Binance': [
    '<span class="cc">// vector_search(): Binance exchange analysis</span>',
    '<span class="cv">bnb</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"name"</span>, <span class="cs2">"Binance"</span>)',
    '<span class="cv">vol</span> = bnb.properties[<span class="cs2">"volume"</span>]  <span class="cc"># "$76B"</span>',
    '<span class="cv">edges</span> = memory.db.<span class="cf">get_edges</span>(bnb.id)',
    '<span class="cc"># → exchange → DeFi (bridge between CeFi/DeFi)</span>',
    '<span class="cc"># → led_by → CZ (Changpeng Zhao)</span>',
    '<span class="cv">rival</span> = memory.db.<span class="cf">find_similar_nodes</span>(<span class="cf">embed</span>(<span class="cs2">"crypto exchange"</span>))',
    '<span class="cc"># Similar: Coinbase (0.89), FTX (0.85 — defunct)</span>',
    'memory.db.<span class="cf">update_node</span>(bnb.id, {<span class="cs2">"bnb_chain"</span>: <span class="cn">True</span>})',
  ],
  'Coinbase': [
    '<span class="cc">// query(): Coinbase public market data</span>',
    '<span class="cv">coin</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"ticker"</span>, <span class="cs2">"COIN"</span>)',
    '<span class="cc"># First crypto company to IPO (NASDAQ, Apr 2021)</span>',
    '<span class="cv">ceo</span> = memory.db.<span class="cf">query</span>(<span class="cs2">"MATCH (p)-[:founded]->(c {name:\'Coinbase\'}) RETURN p"</span>)',
    '<span class="cc"># → Brian Armstrong [CEO]</span>',
    '<span class="cv">edges</span> = memory.db.<span class="cf">get_edges</span>(coin.id)',
    '<span class="cc"># → provides → DeFi (on-ramp for retail users)</span>',
    '<span class="cv">users</span> = <span class="cn">110_000_000</span>  <span class="cc"># verified users</span>',
    'memory.db.<span class="cf">update_node</span>(coin.id, {<span class="cs2">"regulated"</span>: <span class="cn">True</span>, <span class="cs2">"public"</span>: <span class="cn">True</span>})',
  ],
  'Uniswap Labs': [
    '<span class="cc">// SmartNodeProcessor: Uniswap protocol analysis</span>',
    '<span class="cv">uni</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"name"</span>, <span class="cs2">"Uniswap Labs"</span>)',
    '<span class="cv">tvl</span> = uni.properties[<span class="cs2">"tvl"</span>]  <span class="cc"># "$5B+"</span>',
    '<span class="cc"># Pioneered x*y=k AMM model</span>',
    '<span class="cv">creator</span> = memory.db.<span class="cf">query</span>(<span class="cs2">"MATCH (p)-[:created]->(u {name:\'Uniswap Labs\'}) RETURN p"</span>)',
    '<span class="cc"># → Hayden Adams</span>',
    '<span class="cv">versions</span> = [<span class="cs2">"v1"</span>, <span class="cs2">"v2"</span>, <span class="cs2">"v3"</span>, <span class="cs2">"v4"</span>]',
    '<span class="cc"># v4: hooks system, singleton pool, gas optimized</span>',
    'memory.db.<span class="cf">create_edge</span>(uni.id, <span class="cs2">"defi"</span>, <span class="cs2">"powers_amm"</span>)',
  ],
};

// Concept code snippets
const CONCEPT_CODE = {
  'Proof of Stake': [
    '<span class="cc">// SmartRetrievalTool: consensus mechanism analysis</span>',
    '<span class="cv">pos</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"name"</span>, <span class="cs2">"Proof of Stake"</span>)',
    '<span class="cv">edges</span> = memory.db.<span class="cf">get_edges</span>(pos.id)  <span class="cc"># 7 connections</span>',
    '<span class="cc"># inspired_by → Satoshi Nakamoto</span>',
    '<span class="cc"># proposed → Vitalik Buterin</span>',
    '<span class="cc"># used_by → Ethereum Foundation, Solana Labs</span>',
    '<span class="cc"># enables → DeFi</span>',
    '<span class="cv">variants</span> = memory.db.<span class="cf">vector_search</span>(<span class="cs2">"PoS consensus variants"</span>, k=<span class="cn">5</span>)',
    '<span class="cc"># DPoS, NPoS (Polkadot), Ouroboros (Cardano), PoH+PoS</span>',
    '<span class="cv">security</span> = <span class="cf">analyze_consensus</span>(pos.id, metric=<span class="cs2">"nakamoto_coefficient"</span>)',
  ],
  'Smart Contracts': [
    '<span class="cc">// get_connected_nodes(): Smart Contract ecosystem</span>',
    '<span class="cv">sc</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"name"</span>, <span class="cs2">"Smart Contracts"</span>)',
    '<span class="cv">connected</span> = memory.db.<span class="cf">get_connected_nodes</span>(sc.id)',
    '<span class="cc"># Created by: Vitalik Buterin</span>',
    '<span class="cc"># Maintained by: Ethereum Foundation</span>',
    '<span class="cc"># Powers: DeFi</span>',
    '<span class="cc"># Designed by: Gavin Wood (Solidity language)</span>',
    '<span class="cv">languages</span> = [<span class="cs2">"Solidity"</span>, <span class="cs2">"Vyper"</span>, <span class="cs2">"Rust"</span>, <span class="cs2">"Move"</span>]',
    '<span class="cv">tvl_powered</span> = <span class="cs2">"$80B+"</span>  <span class="cc"># total DeFi TVL enabled</span>',
    'memory.db.<span class="cf">update_node</span>(sc.id, {<span class="cs2">"evm_compatible"</span>: <span class="cn">True</span>})',
  ],
  'DeFi': [
    '<span class="cc">// SmartRetrievalTool: DeFi ecosystem deep-dive</span>',
    '<span class="cv">defi</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"name"</span>, <span class="cs2">"DeFi"</span>)',
    '<span class="cv">edge_count</span> = <span class="ck">len</span>(memory.db.<span class="cf">get_edges</span>(defi.id))  <span class="cc"># 10+</span>',
    '<span class="cc"># HIGHEST CONNECTIVITY NODE IN GRAPH</span>',
    '<span class="cv">powered_by</span> = memory.db.<span class="cf">query</span>(<span class="cs2">"MATCH (n)-[:powers]->(d {name:\'DeFi\'}) RETURN n"</span>)',
    '<span class="cc"># [Smart Contracts, Ethereum Foundation]</span>',
    '<span class="cv">protocols</span> = memory.db.<span class="cf">vector_search</span>(<span class="cs2">"top DeFi protocols"</span>, k=<span class="cn">10</span>)',
    '<span class="cc"># Uniswap, Aave, MakerDAO, Compound, Curve, Lido...</span>',
    '<span class="cv">tvl</span> = <span class="cs2">"$80B+"</span>',
    '<span class="cv">categories</span> = [<span class="cs2">"DEX"</span>, <span class="cs2">"Lending"</span>, <span class="cs2">"Stablecoins"</span>, <span class="cs2">"Yield"</span>, <span class="cs2">"Derivatives"</span>]',
    '<span class="cv">risk_score</span> = <span class="cf">assess_systemic_risk</span>(defi.id)  <span class="cc"># 0.72</span>',
  ],
  'Graph Memory': [
    '<span class="cc">// Graphista: LLM-powered graph memory system</span>',
    '<span class="ck">from</span> <span class="cf">graphista</span> <span class="ck">import</span> Memory',
    '',
    '<span class="cv">memory</span> = Memory(',
    '    ontology={<span class="cs2">"entities"</span>: [<span class="cs2">"Person"</span>, <span class="cs2">"Company"</span>, <span class="cs2">"Concept"</span>]},',
    '    llm_config={<span class="cs2">"model"</span>: <span class="cs2">"gpt-4o"</span>},',
    '    db_config={<span class="cs2">"backend"</span>: <span class="cs2">"local"</span>}',
    ')',
    '',
    '<span class="cc"># Two core operations:</span>',
    '<span class="cv">answer</span> = memory.<span class="cf">ask</span>(<span class="cs2">"What connects to DeFi?"</span>)   <span class="cc"># read</span>',
    '<span class="cv">result</span> = memory.<span class="cf">ingest</span>(<span class="cs2">"New protocol launched..."</span>)  <span class="cc"># write</span>',
    '<span class="cc"># Created by Yohei Nakajima (BabyAGI author)</span>',
    '<span class="cc"># github.com/pippinlovesyou/graphista</span>',
  ],
  'Layer 2 Scaling': [
    '<span class="cc">// vector_search(): L2 scaling solutions</span>',
    '<span class="cv">l2</span> = memory.db.<span class="cf">get_node_by_property</span>(<span class="cs2">"name"</span>, <span class="cs2">"Layer 2 Scaling"</span>)',
    '<span class="cv">connected</span> = memory.db.<span class="cf">get_connected_nodes</span>(l2.id)',
    '<span class="cc"># → uses → DeFi (cheaper transactions)</span>',
    '<span class="cc"># → built_on → Ethereum Foundation</span>',
    '<span class="cv">solutions</span> = memory.db.<span class="cf">vector_search</span>(<span class="cs2">"L2 rollups"</span>, k=<span class="cn">5</span>)',
    '<span class="cc"># Optimism, Arbitrum, zkSync, Starknet, Base</span>',
    '<span class="cv">avg_tps</span> = <span class="cn">2000</span>  <span class="cc"># avg L2 TPS vs L1 ~15</span>',
    '<span class="cv">gas_savings</span> = <span class="cs2">"90-99%"</span>  <span class="cc"># compared to L1</span>',
  ],
};

function getCodeForNode(node) {
  if (CODE_SNIPPETS[node.l]) return CODE_SNIPPETS[node.l];
  if (COMPANY_CODE[node.l]) return COMPANY_CODE[node.l];
  if (CONCEPT_CODE[node.l]) return CONCEPT_CODE[node.l];
  return DEFAULT_CODE.map(l => l.replace('$NAME', node.l));
}

// ===== NODES =====
let filt='all';
let expandedNodes = {};
let codeTimers = {};

function animateCode(nodeId, node) {
  const el = document.getElementById('code-' + nodeId);
  if (!el) return;
  const inner = el.querySelector('.ni-code-inner');
  inner.innerHTML = '';
  const lines = getCodeForNode(node);
  let i = 0;
  
  function addLine() {
    if (i >= lines.length) {
      const cursor = document.createElement('span');
      cursor.className = 'ni-code-cursor';
      inner.appendChild(cursor);
      // Animate the progress bar to 100%
      const bar = document.getElementById('bar-' + nodeId);
      if (bar) bar.style.width = '100%';
      return;
    }
    const line = document.createElement('span');
    line.className = 'cline';
    line.style.opacity = '0';
    line.style.transform = 'translateX(-4px)';
    if (lines[i] === '') {
      line.innerHTML = '&nbsp;';
    } else {
      line.innerHTML = lines[i];
    }
    inner.appendChild(line);
    requestAnimationFrame(() => {
      line.style.transition = 'all 0.15s ease';
      line.style.opacity = '1';
      line.style.transform = 'translateX(0)';
    });
    el.scrollTop = el.scrollHeight;
    // Update progress bar
    const bar = document.getElementById('bar-' + nodeId);
    if (bar) bar.style.width = Math.round(((i+1)/lines.length)*100) + '%';
    i++;
    codeTimers[nodeId] = setTimeout(addLine, 90 + Math.random() * 60);
  }
  addLine();
}

function animateEdges(nodeId) {
  const edgesEl = document.getElementById('edges-' + nodeId);
  if (!edgesEl) return;
  edgesEl.innerHTML = '';
  const nodeEdges = E.filter(e => e.s === nodeId || e.t === nodeId);
  let i = 0;
  function addEdge() {
    if (i >= nodeEdges.length) return;
    const edge = nodeEdges[i];
    const other = N[edge.s === nodeId ? edge.t : edge.s];
    if (!other) { i++; addEdge(); return; }
    const dir = edge.s === nodeId ? '→' : '←';
    const div = document.createElement('div');
    div.className = 'ni-edge-item';
    div.style.opacity = '0';
    div.style.transform = 'translateX(-6px)';
    div.innerHTML = `<span class="ni-edge-arrow">${dir}</span> <span class="ni-edge-label">${edge.l}</span> <span class="ni-edge-target">${other.l}</span> <span class="nd" style="background:${COL[other.t]};width:4px;height:4px;border-radius:50%;display:inline-block;margin-left:2px"></span>`;
    edgesEl.appendChild(div);
    requestAnimationFrame(() => {
      div.style.transition = 'all 0.2s ease';
      div.style.opacity = '1';
      div.style.transform = 'translateX(0)';
    });
    i++;
    setTimeout(addEdge, 80);
  }
  addEdge();
}

function toggleExpand(nodeId) {
  const wasOpen = expandedNodes[nodeId];
  expandedNodes[nodeId] = !wasOpen;
  const node = N.find(n => n.id === nodeId);
  
  const codeEl = document.getElementById('code-' + nodeId);
  const chevEl = document.getElementById('exp-' + nodeId);
  
  if (!wasOpen) {
    codeEl.classList.add('open');
    if(chevEl) chevEl.classList.add('open');
    animateCode(nodeId, node);
    animateEdges(nodeId);
    const statsEl = document.getElementById('stats-' + nodeId);
    if (statsEl) {
      const ec = E.filter(e => e.s === nodeId || e.t === nodeId).length;
      statsEl.innerHTML = `<span>edges: <span class="sv">${ec}</span></span><span>type: <span class="sv">${node.t}</span></span><span>id: <span class="sv">${nodeId}</span></span>`;
    }
  } else {
    codeEl.classList.remove('open');
    if(chevEl) chevEl.classList.remove('open');
    if (codeTimers[nodeId]) clearTimeout(codeTimers[nodeId]);
  }
}

function renderN(q=''){
  const nl=document.getElementById('nl');nl.innerHTML='';
  Object.values(codeTimers).forEach(t => clearTimeout(t));
  codeTimers = {};
  expandedNodes = {};
  
  const types={person:'Person',company:'Company',concept:'Concept'};
  Object.entries(types).forEach(([tp,lb])=>{
    const items=N.filter(n=>n.t===tp&&(filt==='all'||n.t===filt)&&(!q||n.l.toLowerCase().includes(q)));
    if(!items.length)return;
    nl.innerHTML+=`<div class="ng">${lb}<span class="nb">${items.length}</span></div>`;
    items.forEach(n=>{
      const ec=E.filter(e=>e.s===n.id||e.t===n.id).length;
      const borderColor = COL[n.t];
      nl.innerHTML+=`<div class="ni-wrap"><div class="ni" data-id="${n.id}" onclick="toggleExpand(${n.id});selN(${n.id})"><div class="nd" style="background:${COL[n.t]}"></div><div class="nf"><div class="nn">${n.l}</div><div class="ns">${n.s}</div></div><div class="ne">${ec}</div><span class="ni-chevron" id="exp-${n.id}">▶</span></div><div class="ni-code" id="code-${n.id}" style="border-left-color:${borderColor}"><div class="ni-mini-bar"><div class="fill" id="bar-${n.id}"></div></div><div class="ni-code-inner"></div><div class="ni-edges" id="edges-${n.id}"></div><div class="ni-stats-row" id="stats-${n.id}"></div></div></div>`;
    });
  });
}
let selId=null;
function selN(id){selId=id;document.querySelectorAll('.ni').forEach(el=>el.classList.toggle('sel',+el.dataset.id===id));}
document.getElementById('nSrch').oninput=e=>renderN(e.target.value.toLowerCase());
document.querySelectorAll('.ft').forEach(b=>b.onclick=()=>{document.querySelectorAll('.ft').forEach(c=>c.classList.remove('on'));b.classList.add('on');filt=b.dataset.f;renderN(document.getElementById('nSrch').value.toLowerCase())});

// ===== NAV =====
document.querySelectorAll('.rb[data-v]').forEach(b=>b.onclick=()=>{
  document.querySelectorAll('.rb').forEach(x=>x.classList.remove('on'));b.classList.add('on');
  const v=b.dataset.v;
  document.getElementById('crumb').textContent={arch:'system_architecture',graph:'force_graph',ingest:'ingest_engine',query:'smart_retrieval'}[v]||v;
  if(v==='arch'){document.querySelectorAll('.mode-btn').forEach(x=>x.classList.toggle('on',x.dataset.mode==='arch'));mode='arch';closeArchPanel();}
  if(v==='graph'){document.querySelectorAll('.mode-btn').forEach(x=>x.classList.toggle('on',x.dataset.mode==='graph'));mode='graph';closeArchPanel();}
  if(v==='ingest')document.getElementById('iT').focus();
  if(v==='query')document.getElementById('aIn').focus();
});
document.getElementById('ingBtn').onclick=()=>{document.querySelector('.rb[data-v="ingest"]').click()};

// Mode toggle
let mode='arch';
document.querySelectorAll('.mode-btn').forEach(b=>b.onclick=()=>{
  document.querySelectorAll('.mode-btn').forEach(x=>x.classList.remove('on'));b.classList.add('on');mode=b.dataset.mode;closeArchPanel();
});

// Modals
const setMo=document.getElementById('setMo'),expMo=document.getElementById('expMo');
document.getElementById('setBtn').onclick=()=>setMo.classList.add('show');
document.getElementById('expBtn').onclick=()=>expMo.classList.add('show');
[setMo,expMo].forEach(m=>m.onclick=e=>{if(e.target===m)m.classList.remove('show')});
document.getElementById('dExp').onclick=()=>{const d=JSON.stringify({nodes:N,edges:E},null,2);const b=new Blob([d],{type:'application/json'});const a=document.createElement('a');a.href=URL.createObjectURL(b);a.download='graphista.json';a.click();expMo.classList.remove('show')};

// ===== CANVAS =====
const cv=document.getElementById('C'),cx=cv.getContext('2d'),av=document.getElementById('archView');
let W,H,zm=1,px=0,py=0,drag=false,dN=null,hN=null,fr=0,particles=[];
let mouseX=0,mouseY=0;

// Init graph positions
N.forEach((n,i)=>{const a=(i/N.length)*Math.PI*2,r=160+Math.random()*100;n.x=Math.cos(a)*r;n.y=Math.sin(a)*r;n.vx=0;n.vy=0;n.r=12+E.filter(e=>e.s===n.id||e.t===n.id).length*1.5;});

function resize(){const r=av.getBoundingClientRect();W=r.width;H=r.height;cv.width=W*devicePixelRatio;cv.height=H*devicePixelRatio;cv.style.width=W+'px';cv.style.height=H+'px';cx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);}

// Physics
function sim(){
  N.forEach(n=>{n.vx-=n.x*.0015;n.vy-=n.y*.0015});
  for(let i=0;i<N.length;i++)for(let j=i+1;j<N.length;j++){
    const dx=N[j].x-N[i].x,dy=N[j].y-N[i].y,d=Math.sqrt(dx*dx+dy*dy)||1,f=4000/(d*d);
    N[i].vx-=(dx/d)*f;N[i].vy-=(dy/d)*f;N[j].vx+=(dx/d)*f;N[j].vy+=(dy/d)*f;
  }
  E.forEach(e=>{
    const a=N[e.s],b=N[e.t];if(!a||!b)return;
    const dx=b.x-a.x,dy=b.y-a.y,d=Math.sqrt(dx*dx+dy*dy)||1,f=(d-100)*.004;
    a.vx+=(dx/d)*f;a.vy+=(dy/d)*f;b.vx-=(dx/d)*f;b.vy-=(dy/d)*f;
  });
  N.forEach(n=>{if(n===dN&&drag)return;n.vx*=.82;n.vy*=.82;n.x+=n.vx;n.y+=n.vy});
}

function nodeAt(mx,my){const cx2=(mx-W/2-px)/zm,cy2=(my-H/2-py)/zm;for(let i=N.length-1;i>=0;i--){const n=N[i],dx=cx2-n.x,dy=cy2-n.y;if(dx*dx+dy*dy<(n.r+5)*(n.r+5))return n;}return null;}

function spawnP(x1,y1,x2,y2,c){particles.push({x:x1,y:y1,tx:x2,ty:y2,p:0,sp:.006+Math.random()*.006,c,sz:1.5+Math.random()*1});}

// ===== ARCHITECTURE DRAWING =====
function getB(){
  const cx2=W/2,cy2=H/2;
  const c1=cx2-300,c2=cx2-100,c3=cx2+100,c4=cx2+280,c5=cx2+420;
  return {
    user:{x:c1-40,y:cy2-12,w:80,h:24,l:'USER',c:'#aa66ff',d:'Operator interface\ncalls ask() or ingest()'},
    ask:{x:c2-45,y:cy2-75,w:90,h:22,l:'ask(question)',c:'#4488ff',d:'Natural language query\nReturns {answer, chain_of_thought}'},
    ingest:{x:c2-45,y:cy2+53,w:90,h:22,l:'ingest(text)',c:'#ffcc00',d:'Raw text input\nReturns {doc_id, processing_result}'},
    answer:{x:c2-45,y:cy2-120,w:90,h:20,l:'Answer {cot}',c:'#4488ff',d:'Final answer + reasoning chain'},
    result:{x:c2-45,y:cy2+98,w:90,h:20,l:'Result {id}',c:'#ffcc00',d:'Document ID + processing result'},
    retool:{x:c3-60,y:cy2-85,w:120,h:30,l:'SmartRetrievalTool',c:'#00ff88',d:'Chain-of-Thought Loop\nRead-only graph access\nExits with finish action'},
    proctool:{x:c3-60,y:cy2+55,w:120,h:30,l:'SmartNodeProcessor',c:'#00ff88',d:'Node Processing Loop\nFull read/write access\nDeduplicates & extracts'},
    rtools:{x:c4-50,y:cy2-120,w:100,h:110,l:'Read Tools',c:'#4488ff',d:'find_similar_nodes()\nget_node_by_property()\nget_connected_nodes()\nget_edges()\nvector_search()\nquery()',tools:['find_similar()','get_property()','get_connected()','get_edges()','vector_search()','query()']},
    wtools:{x:c4-50,y:cy2+20,w:100,h:95,l:'Write Tools',c:'#ffcc00',d:'create_node()\nupdate_node()\ncreate_edge()\nbatch_create_nodes()\nbatch_create_edges()',tools:['create_node()','update_node()','create_edge()','batch_create()','batch_edges()']},
    db:{x:c5-45,y:cy2-16,w:90,h:32,l:'GraphDatabase',c:'#00ff88',d:'Backend storage\nLocal JSON / Neo4j / FalkorDB\nStores nodes, edges, embeddings'},
  };
}

function drawBox(b,hover,active){
  cx.save();
  const h=hover||active;
  cx.strokeStyle=h?b.c:b.c+'55';cx.lineWidth=h?1.5:1;
  if(active){cx.lineWidth=2;cx.shadowColor=b.c;cx.shadowBlur=12;}
  cx.strokeRect(b.x,b.y,b.w,b.h);
  cx.shadowBlur=0;
  cx.fillStyle=active?b.c+'25':(h?b.c+'18':b.c+'08');cx.fillRect(b.x,b.y,b.w,b.h);
  if(b.tools){
    cx.font='600 8px "JetBrains Mono"';cx.fillStyle=h?b.c:b.c+'bb';cx.textAlign='center';cx.fillText(b.l,b.x+b.w/2,b.y+12);
    cx.font='400 6px "JetBrains Mono"';cx.fillStyle=b.c+'77';
    b.tools.forEach((t,i)=>cx.fillText(t,b.x+b.w/2,b.y+24+i*12));
  } else {
    cx.font='600 8px "JetBrains Mono"';cx.fillStyle=h?b.c:b.c+'bb';cx.textAlign='center';
    cx.fillText(b.l,b.x+b.w/2,b.y+b.h/2+3);
  }
  // Active indicator
  if(active){
    cx.fillStyle=b.c;cx.beginPath();cx.arc(b.x+b.w-4,b.y+4,2.5,0,Math.PI*2);cx.fill();
  }
  cx.restore();
}

function drawArr(x1,y1,x2,y2,c,dash){
  cx.save();cx.strokeStyle=c+'33';cx.lineWidth=.7;if(dash)cx.setLineDash([2,2]);
  cx.beginPath();cx.moveTo(x1,y1);cx.lineTo(x2,y2);cx.stroke();
  const a=Math.atan2(y2-y1,x2-x1);cx.fillStyle=c+'33';cx.beginPath();cx.moveTo(x2,y2);cx.lineTo(x2-5*Math.cos(a-.4),y2-5*Math.sin(a-.4));cx.lineTo(x2-5*Math.cos(a+.4),y2-5*Math.sin(a+.4));cx.fill();cx.restore();
}

function drawLoop(bx,by,bw,c){
  cx.save();cx.strokeStyle=c+'44';cx.lineWidth=.6;cx.setLineDash([2,2]);cx.beginPath();cx.moveTo(bx+bw/2+12,by);cx.quadraticCurveTo(bx+bw/2+12,by-14,bx+bw/2-12,by);cx.stroke();cx.fillStyle=c+'44';cx.beginPath();cx.moveTo(bx+bw/2-12,by);cx.lineTo(bx+bw/2-9,by-3);cx.lineTo(bx+bw/2-9,by+3);cx.fill();cx.restore();
}

function drawSec(x,y,txt){cx.font='600 7px "JetBrains Mono"';cx.fillStyle='#262626';cx.textAlign='left';cx.fillText(txt,x,y);}

let hoveredBox=null;
function boxAt(mx,my){
  const B=getB();
  for(const[k,b]of Object.entries(B)){if(mx>=b.x&&mx<=b.x+b.w&&my>=b.y&&my<=b.y+b.h)return{key:k,...b};}
  return null;
}

function drawArch(){
  drawGrid();

  const B=getB();
  // Additional intermediate micro-nodes for neural-net density
  const cx2=W/2,cy2=H/2;
  const micro=[
    // Between user and functions
    {x:B.user.x+B.user.w+15,y:cy2-40,w:50,h:14,l:'parse',c:'#aa66ff'},
    {x:B.user.x+B.user.w+15,y:cy2+26,w:50,h:14,l:'validate',c:'#aa66ff'},
    {x:B.user.x+B.user.w+15,y:cy2-8,w:50,h:14,l:'auth',c:'#aa66ff'},
    // Between functions and loops
    {x:B.ask.x+B.ask.w+15,y:cy2-95,w:50,h:14,l:'embed q',c:'#4488ff'},
    {x:B.ask.x+B.ask.w+15,y:cy2-60,w:50,h:14,l:'plan',c:'#4488ff'},
    {x:B.ingest.x+B.ingest.w+15,y:cy2+48,w:50,h:14,l:'tokenize',c:'#ffcc00'},
    {x:B.ingest.x+B.ingest.w+15,y:cy2+80,w:50,h:14,l:'chunk',c:'#ffcc00'},
    // Between loops and tools
    {x:B.retool.x+B.retool.w+10,y:cy2-110,w:45,h:14,l:'select',c:'#00ff88'},
    {x:B.retool.x+B.retool.w+10,y:cy2-78,w:45,h:14,l:'invoke',c:'#00ff88'},
    {x:B.proctool.x+B.proctool.w+10,y:cy2+45,w:45,h:14,l:'dedup',c:'#00ff88'},
    {x:B.proctool.x+B.proctool.w+10,y:cy2+78,w:45,h:14,l:'merge',c:'#00ff88'},
    // Between tools and DB
    {x:B.rtools.x+B.rtools.w+12,y:cy2-60,w:45,h:14,l:'cache',c:'#4488ff'},
    {x:B.rtools.x+B.rtools.w+12,y:cy2-30,w:45,h:14,l:'parse r',c:'#4488ff'},
    {x:B.wtools.x+B.wtools.w+12,y:cy2+30,w:45,h:14,l:'commit',c:'#ffcc00'},
    {x:B.wtools.x+B.wtools.w+12,y:cy2+60,w:45,h:14,l:'index',c:'#ffcc00'},
  ];
  
  drawSec(B.user.x,B.user.y-22,'SECTION_001 // USER');
  drawSec(B.ask.x,Math.min(B.answer.y,B.ask.y)-22,'SECTION_002 // FUNCTIONS');
  drawSec(B.retool.x,B.retool.y-30,'SECTION_003 // LLM_LOOPS');
  drawSec(B.rtools.x,B.rtools.y-14,'SECTION_004 // TOOLS');
  drawSec(B.db.x,B.db.y-22,'SECTION_005 // DB');

  // Original main arrows
  drawArr(B.user.x+B.user.w,B.user.y+B.user.h/2-6,B.ask.x,B.ask.y+B.ask.h/2,'#4488ff');
  drawArr(B.user.x+B.user.w,B.user.y+B.user.h/2+6,B.ingest.x,B.ingest.y+B.ingest.h/2,'#ffcc00');
  drawArr(B.ask.x+B.ask.w/2,B.ask.y,B.answer.x+B.answer.w/2,B.answer.y+B.answer.h,'#4488ff',1);
  drawArr(B.answer.x,B.answer.y+B.answer.h/2,B.user.x+B.user.w,B.user.y+B.user.h/2-12,'#4488ff',1);
  drawArr(B.ingest.x+B.ingest.w/2,B.ingest.y+B.ingest.h,B.result.x+B.result.w/2,B.result.y,'#ffcc00',1);
  drawArr(B.result.x,B.result.y+B.result.h/2,B.user.x+B.user.w,B.user.y+B.user.h/2+12,'#ffcc00',1);
  drawArr(B.ask.x+B.ask.w,B.ask.y+B.ask.h/2,B.retool.x,B.retool.y+B.retool.h/2,'#00ff88');
  drawArr(B.ingest.x+B.ingest.w,B.ingest.y+B.ingest.h/2,B.proctool.x,B.proctool.y+B.proctool.h/2,'#00ff88');
  drawArr(B.retool.x+B.retool.w,B.retool.y+B.retool.h/2,B.rtools.x,B.rtools.y+25,'#4488ff');
  drawArr(B.proctool.x+B.proctool.w,B.proctool.y+B.proctool.h/2-6,B.rtools.x,B.rtools.y+B.rtools.h-10,'#4488ff',1);
  drawArr(B.proctool.x+B.proctool.w,B.proctool.y+B.proctool.h/2+6,B.wtools.x,B.wtools.y+25,'#ffcc00');
  drawArr(B.rtools.x+B.rtools.w,B.rtools.y+B.rtools.h/2,B.db.x,B.db.y+B.db.h/2-4,'#4488ff');
  drawArr(B.wtools.x+B.wtools.w,B.wtools.y+B.wtools.h/2,B.db.x,B.db.y+B.db.h/2+4,'#ffcc00');

  // Micro-node connections — neural net density
  // User → micro parse/validate/auth
  for(let i=0;i<3;i++)drawArr(B.user.x+B.user.w,B.user.y+B.user.h/2,micro[i].x,micro[i].y+7,micro[i].c+'55');
  // Parse/validate → ask/ingest
  drawArr(micro[0].x+micro[0].w,micro[0].y+7,B.ask.x,B.ask.y+B.ask.h/2,'#4488ff'+'44');
  drawArr(micro[1].x+micro[1].w,micro[1].y+7,B.ingest.x,B.ingest.y+B.ingest.h/2,'#ffcc00'+'44');
  drawArr(micro[2].x+micro[2].w,micro[2].y+7,B.ask.x,B.ask.y+B.ask.h/2,'#4488ff'+'33');
  drawArr(micro[2].x+micro[2].w,micro[2].y+7,B.ingest.x,B.ingest.y+B.ingest.h/2,'#ffcc00'+'33');
  // ask → embed/plan micro → retool
  drawArr(B.ask.x+B.ask.w,B.ask.y+4,micro[3].x,micro[3].y+7,'#4488ff'+'55');
  drawArr(B.ask.x+B.ask.w,B.ask.y+B.ask.h-4,micro[4].x,micro[4].y+7,'#4488ff'+'55');
  drawArr(micro[3].x+micro[3].w,micro[3].y+7,B.retool.x,B.retool.y+8,'#00ff88'+'44');
  drawArr(micro[4].x+micro[4].w,micro[4].y+7,B.retool.x,B.retool.y+B.retool.h/2,'#00ff88'+'44');
  // ingest → tokenize/chunk micro → proctool
  drawArr(B.ingest.x+B.ingest.w,B.ingest.y+4,micro[5].x,micro[5].y+7,'#ffcc00'+'55');
  drawArr(B.ingest.x+B.ingest.w,B.ingest.y+B.ingest.h-4,micro[6].x,micro[6].y+7,'#ffcc00'+'55');
  drawArr(micro[5].x+micro[5].w,micro[5].y+7,B.proctool.x,B.proctool.y+8,'#00ff88'+'44');
  drawArr(micro[6].x+micro[6].w,micro[6].y+7,B.proctool.x,B.proctool.y+B.proctool.h-8,'#00ff88'+'44');
  // retool → select/invoke → rtools
  drawArr(B.retool.x+B.retool.w,B.retool.y+6,micro[7].x,micro[7].y+7,'#00ff88'+'55');
  drawArr(B.retool.x+B.retool.w,B.retool.y+B.retool.h-6,micro[8].x,micro[8].y+7,'#00ff88'+'55');
  drawArr(micro[7].x+micro[7].w,micro[7].y+7,B.rtools.x,B.rtools.y+15,'#4488ff'+'44');
  drawArr(micro[8].x+micro[8].w,micro[8].y+7,B.rtools.x,B.rtools.y+40,'#4488ff'+'44');
  // proctool → dedup/merge → wtools
  drawArr(B.proctool.x+B.proctool.w,B.proctool.y+6,micro[9].x,micro[9].y+7,'#00ff88'+'55');
  drawArr(B.proctool.x+B.proctool.w,B.proctool.y+B.proctool.h-6,micro[10].x,micro[10].y+7,'#00ff88'+'55');
  drawArr(micro[9].x+micro[9].w,micro[9].y+7,B.wtools.x,B.wtools.y+15,'#ffcc00'+'44');
  drawArr(micro[10].x+micro[10].w,micro[10].y+7,B.wtools.x,B.wtools.y+50,'#ffcc00'+'44');
  // Cross-links: dedup also reads
  drawArr(micro[9].x+micro[9].w,micro[9].y+3,B.rtools.x,B.rtools.y+B.rtools.h-15,'#4488ff'+'33');
  // rtools → cache/parse → db
  drawArr(B.rtools.x+B.rtools.w,B.rtools.y+25,micro[11].x,micro[11].y+7,'#4488ff'+'55');
  drawArr(B.rtools.x+B.rtools.w,B.rtools.y+55,micro[12].x,micro[12].y+7,'#4488ff'+'55');
  drawArr(micro[11].x+micro[11].w,micro[11].y+7,B.db.x,B.db.y+6,'#00ff88'+'44');
  drawArr(micro[12].x+micro[12].w,micro[12].y+7,B.db.x,B.db.y+B.db.h/2,'#00ff88'+'44');
  // wtools → commit/index → db
  drawArr(B.wtools.x+B.wtools.w,B.wtools.y+25,micro[13].x,micro[13].y+7,'#ffcc00'+'55');
  drawArr(B.wtools.x+B.wtools.w,B.wtools.y+55,micro[14].x,micro[14].y+7,'#ffcc00'+'55');
  drawArr(micro[13].x+micro[13].w,micro[13].y+7,B.db.x,B.db.y+B.db.h/2,'#ffcc00'+'44');
  drawArr(micro[14].x+micro[14].w,micro[14].y+7,B.db.x,B.db.y+B.db.h-6,'#ffcc00'+'44');
  // Cross-layer links for neural-net feel
  drawArr(micro[3].x+micro[3].w,micro[3].y+7,micro[7].x,micro[7].y+7,'#00ff88'+'22');
  drawArr(micro[4].x+micro[4].w,micro[4].y+7,micro[8].x,micro[8].y+7,'#00ff88'+'22');
  drawArr(micro[5].x+micro[5].w,micro[5].y+7,micro[9].x,micro[9].y+7,'#00ff88'+'22');
  drawArr(micro[6].x+micro[6].w,micro[6].y+7,micro[10].x,micro[10].y+7,'#00ff88'+'22');
  drawArr(micro[7].x+micro[7].w,micro[7].y+7,micro[11].x,micro[11].y+7,'#4488ff'+'22');
  drawArr(micro[8].x+micro[8].w,micro[8].y+7,micro[12].x,micro[12].y+7,'#4488ff'+'22');
  drawArr(micro[9].x+micro[9].w,micro[9].y+7,micro[13].x,micro[13].y+7,'#ffcc00'+'22');
  drawArr(micro[10].x+micro[10].w,micro[10].y+7,micro[14].x,micro[14].y+7,'#ffcc00'+'22');

  drawLoop(B.retool.x,B.retool.y,B.retool.w,'#00ff88');
  drawLoop(B.proctool.x,B.proctool.y,B.proctool.w,'#00ff88');

  // Draw micro nodes
  micro.forEach(m=>drawBox(m,false,false));
  // Draw main boxes on top
  Object.entries(B).forEach(([k,b])=>drawBox(b,hoveredBox&&hoveredBox.key===k,archPanelOpen&&archPanelKey===k));

  // Particles — more frequent for density
  if(fr%35===0){spawnP(B.user.x+B.user.w,B.user.y+B.user.h/2-6,B.ask.x,B.ask.y+B.ask.h/2,'#4488ff');spawnP(B.ask.x+B.ask.w,B.ask.y+B.ask.h/2,B.retool.x,B.retool.y+B.retool.h/2,'#00ff88');}
  if(fr%45===0){spawnP(B.user.x+B.user.w,B.user.y+B.user.h/2+6,B.ingest.x,B.ingest.y+B.ingest.h/2,'#ffcc00');spawnP(B.ingest.x+B.ingest.w,B.ingest.y+B.ingest.h/2,B.proctool.x,B.proctool.y+B.proctool.h/2,'#00ff88');}
  if(fr%40===0){spawnP(B.retool.x+B.retool.w,B.retool.y+B.retool.h/2,B.rtools.x,B.rtools.y+25,'#4488ff');spawnP(B.rtools.x+B.rtools.w,B.rtools.y+B.rtools.h/2,B.db.x,B.db.y+B.db.h/2,'#00ff88');}
  if(fr%50===0){spawnP(B.proctool.x+B.proctool.w,B.proctool.y+B.proctool.h/2+6,B.wtools.x,B.wtools.y+25,'#ffcc00');spawnP(B.wtools.x+B.wtools.w,B.wtools.y+B.wtools.h/2,B.db.x,B.db.y+B.db.h/2+4,'#ffcc00');}
  if(fr%60===0){spawnP(B.answer.x,B.answer.y+B.answer.h/2,B.user.x+B.user.w,B.user.y+B.user.h/2-12,'#4488ff');spawnP(B.result.x,B.result.y+B.result.h/2,B.user.x+B.user.w,B.user.y+B.user.h/2+12,'#ffcc00');}
  // Micro-node particles
  if(fr%25===0){const i=Math.floor(Math.random()*3);spawnP(B.user.x+B.user.w,B.user.y+B.user.h/2,micro[i].x,micro[i].y+7,micro[i].c);}
  if(fr%30===0){const i=3+Math.floor(Math.random()*4);const tx=i<5?B.retool.x:B.proctool.x;const ty=i<5?B.retool.y+B.retool.h/2:B.proctool.y+B.proctool.h/2;spawnP(micro[i].x+micro[i].w,micro[i].y+7,tx,ty,micro[i].c);}
  if(fr%28===0){const i=7+Math.floor(Math.random()*4);spawnP(micro[i].x+micro[i].w,micro[i].y+7,i<9?B.rtools.x:B.wtools.x,cy2,micro[i].c);}
  if(fr%32===0){const i=11+Math.floor(Math.random()*4);spawnP(micro[i].x+micro[i].w,micro[i].y+7,B.db.x,B.db.y+B.db.h/2,micro[i].c);}
}

// ===== FORCE GRAPH DRAWING =====
function drawGraph(){
  cx.save();cx.translate(W/2+px,H/2+py);cx.scale(zm,zm);
  // Grid
  cx.strokeStyle='#131313';cx.lineWidth=.4;
  for(let x=-800;x<=800;x+=50){cx.beginPath();cx.moveTo(x,-600);cx.lineTo(x,600);cx.stroke();}
  for(let y=-600;y<=600;y+=50){cx.beginPath();cx.moveTo(-800,y);cx.lineTo(800,y);cx.stroke();}

  E.forEach(e=>{
    const a=N[e.s],b=N[e.t];if(!a||!b)return;
    const hi=hN&&(e.s===hN.id||e.t===hN.id);const sl=selId!==null&&(e.s===selId||e.t===selId);
    cx.beginPath();cx.moveTo(a.x,a.y);cx.lineTo(b.x,b.y);
    cx.strokeStyle=(hi||sl)?'#00ff8855':'#1a1a1a';cx.lineWidth=(hi||sl)?1:.5;cx.stroke();
    if(hi||sl){const mx2=(a.x+b.x)/2,my2=(a.y+b.y)/2;cx.font='400 6px "JetBrains Mono"';cx.fillStyle='#444';cx.textAlign='center';cx.fillText(e.l,mx2,my2-3);}
  });

  N.forEach(n=>{
    const hi=hN===n;const sl=selId===n.id;const c=COL[n.t];const r=n.r+((hi||sl)?2:0);
    if(hi||sl){cx.beginPath();cx.arc(n.x,n.y,r+8,0,Math.PI*2);cx.fillStyle=c+'0a';cx.fill();cx.beginPath();cx.arc(n.x,n.y,r+8,0,Math.PI*2);cx.strokeStyle=c+'18';cx.lineWidth=.4;cx.stroke();}
    cx.beginPath();cx.arc(n.x,n.y,r,0,Math.PI*2);cx.fillStyle=(hi||sl)?c+'cc':c+'77';cx.fill();
    cx.beginPath();cx.arc(n.x,n.y,r,0,Math.PI*2);cx.strokeStyle=(hi||sl)?c:c+'25';cx.lineWidth=(hi||sl)?1.5:.6;cx.stroke();
    cx.font=((hi||sl)?'600':'400')+' 7px "JetBrains Mono"';cx.fillStyle=(hi||sl)?'#ccc':'#555';cx.textAlign='center';cx.fillText(n.l,n.x,n.y+r+10);
  });
  cx.restore();
}

// ===== INGEST FLOW MAP =====
function drawIngestMap(){
  drawGrid();
  const cx2=W/2,cy=H/2;
  const B=[
    {x:cx2-400,y:cy-10,w:70,h:22,l:'Raw Text',c:'#aa66ff'},
    {x:cx2-290,y:cy-10,w:70,h:22,l:'ingest()',c:'#ffcc00'},
    {x:cx2-175,y:cy-80,w:85,h:20,l:'LLM Extract',c:'#00ff88'},
    {x:cx2-175,y:cy-44,w:85,h:20,l:'Tokenizer',c:'#00dddd'},
    {x:cx2-175,y:cy-8,w:85,h:20,l:'Ontology Match',c:'#4488ff'},
    {x:cx2-175,y:cy+28,w:85,h:20,l:'Schema Validate',c:'#aa66ff'},
    {x:cx2-175,y:cy+64,w:85,h:20,l:'Chunk Splitter',c:'#ff8844'},
    {x:cx2-40,y:cy-80,w:85,h:20,l:'Entity List',c:'#4488ff'},
    {x:cx2-40,y:cy-44,w:85,h:20,l:'Relation List',c:'#00ff88'},
    {x:cx2-40,y:cy-8,w:85,h:20,l:'Dedup Check',c:'#ff8844'},
    {x:cx2-40,y:cy+28,w:85,h:20,l:'Similarity 0.92',c:'#ffcc00'},
    {x:cx2-40,y:cy+64,w:85,h:20,l:'Merge Logic',c:'#aa66ff'},
    {x:cx2+95,y:cy-80,w:85,h:20,l:'Embed ada-002',c:'#4488ff'},
    {x:cx2+95,y:cy-44,w:85,h:20,l:'Batch Embed',c:'#00dddd'},
    {x:cx2+95,y:cy-8,w:85,h:20,l:'Create Nodes',c:'#00ff88'},
    {x:cx2+95,y:cy+28,w:85,h:20,l:'Create Edges',c:'#00ff88'},
    {x:cx2+95,y:cy+64,w:85,h:20,l:'Update Props',c:'#ffcc00'},
    {x:cx2+230,y:cy-60,w:80,h:20,l:'Vector Index',c:'#00dddd'},
    {x:cx2+230,y:cy-24,w:80,h:20,l:'Node Store',c:'#00ff88'},
    {x:cx2+230,y:cy+12,w:80,h:20,l:'Edge Store',c:'#00ff88'},
    {x:cx2+230,y:cy+48,w:80,h:20,l:'Embed Store',c:'#4488ff'},
    {x:cx2+355,y:cy-20,w:80,h:22,l:'GraphDB',c:'#00ff88'},
    {x:cx2+355,y:cy+16,w:80,h:22,l:'Result {id}',c:'#ffcc00'},
  ];
  drawSec(B[0].x,B[0].y-18,'INPUT');drawSec(B[2].x,B[2].y-18,'PROCESSING');drawSec(B[7].x,B[7].y-18,'EXTRACTION');drawSec(B[12].x,B[12].y-18,'MUTATION');drawSec(B[17].x,B[17].y-18,'STORAGE');drawSec(B[21].x,B[21].y-18,'OUTPUT');
  // Dense connections
  drawArr(B[0].x+B[0].w,B[0].y+11,B[1].x,B[1].y+11,'#ffcc00');
  for(let i=2;i<=6;i++)drawArr(B[1].x+B[1].w,B[1].y+11,B[i].x,B[i].y+10,B[i].c);
  // Processing → Extraction (cross-links)
  const pLinks=[[2,7],[2,8],[3,7],[3,9],[4,8],[4,9],[5,10],[5,11],[6,9],[6,11]];
  pLinks.forEach(([a,b])=>drawArr(B[a].x+B[a].w,B[a].y+10,B[b].x,B[b].y+10,B[b].c+'88'));
  // Extraction → Mutation
  const eLinks=[[7,12],[7,14],[8,15],[9,14],[9,12],[10,13],[10,16],[11,14],[11,16]];
  eLinks.forEach(([a,b])=>drawArr(B[a].x+B[a].w,B[a].y+10,B[b].x,B[b].y+10,B[b].c+'88'));
  // Mutation → Storage
  const mLinks=[[12,17],[12,20],[13,17],[13,20],[14,18],[15,19],[16,18],[16,20]];
  mLinks.forEach(([a,b])=>drawArr(B[a].x+B[a].w,B[a].y+10,B[b].x,B[b].y+10,B[b].c+'88'));
  // Storage → output
  for(let i=17;i<=20;i++){drawArr(B[i].x+B[i].w,B[i].y+10,B[21].x,B[21].y+11,B[i].c+'66');drawArr(B[i].x+B[i].w,B[i].y+10,B[22].x,B[22].y+11,'#ffcc00'+'44');}
  drawLoop(B[9].x,B[9].y,B[9].w,'#ff8844');
  B.forEach(b=>drawBox(b,false,false));
  // Particles
  if(fr%30===0)spawnP(B[0].x+B[0].w,B[0].y+11,B[1].x,B[1].y+11,'#ffcc00');
  if(fr%25===0){const i=2+Math.floor(Math.random()*5);spawnP(B[1].x+B[1].w,B[1].y+11,B[i].x,B[i].y+10,B[i].c);}
  if(fr%20===0){const p=pLinks[Math.floor(Math.random()*pLinks.length)];spawnP(B[p[0]].x+B[p[0]].w,B[p[0]].y+10,B[p[1]].x,B[p[1]].y+10,B[p[1]].c);}
  if(fr%22===0){const e=eLinks[Math.floor(Math.random()*eLinks.length)];spawnP(B[e[0]].x+B[e[0]].w,B[e[0]].y+10,B[e[1]].x,B[e[1]].y+10,B[e[1]].c);}
  if(fr%28===0){const m=mLinks[Math.floor(Math.random()*mLinks.length)];spawnP(B[m[0]].x+B[m[0]].w,B[m[0]].y+10,B[m[1]].x,B[m[1]].y+10,B[m[1]].c);}
  if(fr%35===0){const i=17+Math.floor(Math.random()*4);spawnP(B[i].x+B[i].w,B[i].y+10,B[21].x,B[21].y+11,'#00ff88');}
}

// ===== QUERY FLOW MAP =====
function drawQueryMap(){
  drawGrid();
  const cx2=W/2,cy=H/2;
  const B=[
    {x:cx2-400,y:cy-10,w:70,h:22,l:'Question',c:'#aa66ff'},
    {x:cx2-290,y:cy-10,w:60,h:22,l:'ask()',c:'#4488ff'},
    {x:cx2-185,y:cy-70,w:85,h:20,l:'Parse Intent',c:'#00dddd'},
    {x:cx2-185,y:cy-34,w:85,h:20,l:'Embed Query',c:'#4488ff'},
    {x:cx2-185,y:cy+2,w:85,h:20,l:'Context Init',c:'#ffcc00'},
    {x:cx2-185,y:cy+38,w:85,h:20,l:'Plan Strategy',c:'#aa66ff'},
    {x:cx2-50,y:cy-90,w:95,h:22,l:'SmartRetrieval',c:'#00ff88'},
    {x:cx2-50,y:cy-54,w:95,h:20,l:'LLM Decide',c:'#00ff88'},
    {x:cx2-50,y:cy-20,w:95,h:20,l:'Execute Tool',c:'#4488ff'},
    {x:cx2-50,y:cy+14,w:95,h:20,l:'Parse Result',c:'#ffcc00'},
    {x:cx2-50,y:cy+48,w:95,h:20,l:'Append Context',c:'#ff8844'},
    {x:cx2-50,y:cy+80,w:95,h:20,l:'Check Done?',c:'#aa66ff'},
    {x:cx2+100,y:cy-90,w:80,h:20,l:'vector_search',c:'#4488ff'},
    {x:cx2+100,y:cy-58,w:80,h:20,l:'get_edges',c:'#4488ff'},
    {x:cx2+100,y:cy-26,w:80,h:20,l:'find_similar',c:'#4488ff'},
    {x:cx2+100,y:cy+6,w:80,h:20,l:'get_connected',c:'#4488ff'},
    {x:cx2+100,y:cy+38,w:80,h:20,l:'get_property',c:'#4488ff'},
    {x:cx2+100,y:cy+70,w:80,h:20,l:'query(cypher)',c:'#4488ff'},
    {x:cx2+230,y:cy-70,w:75,h:20,l:'Vector Idx',c:'#00dddd'},
    {x:cx2+230,y:cy-34,w:75,h:20,l:'Node Store',c:'#00ff88'},
    {x:cx2+230,y:cy+2,w:75,h:20,l:'Edge Store',c:'#00ff88'},
    {x:cx2+230,y:cy+38,w:75,h:20,l:'Embed Store',c:'#4488ff'},
    {x:cx2+355,y:cy-30,w:80,h:22,l:'GraphDB',c:'#00ff88'},
    {x:cx2-290,y:cy+70,w:180,h:22,l:'Synthesize → Answer {cot}',c:'#00ff88'},
  ];
  drawSec(B[0].x,B[0].y-18,'USER');drawSec(B[2].x,B[2].y-18,'PREPARATION');drawSec(B[6].x,B[6].y-18,'LLM LOOP');drawSec(B[12].x,B[12].y-18,'READ TOOLS');drawSec(B[18].x,B[18].y-18,'STORAGE');drawSec(B[22].x,B[22].y-18,'DATABASE');
  drawArr(B[0].x+B[0].w,B[0].y+11,B[1].x,B[1].y+11,'#4488ff');
  for(let i=2;i<=5;i++)drawArr(B[1].x+B[1].w,B[1].y+11,B[i].x,B[i].y+10,B[i].c);
  // Prep → Loop
  const pL=[[2,7],[3,7],[3,8],[4,7],[4,10],[5,7]];
  pL.forEach(([a,b])=>drawArr(B[a].x+B[a].w,B[a].y+10,B[b].x,B[b].y+10,B[b].c+'88'));
  // Loop internal chain
  drawArr(B[7].x+B[7].w/2,B[7].y+B[7].h,B[8].x+B[8].w/2,B[8].y,'#4488ff');
  drawArr(B[8].x+B[8].w/2,B[8].y+B[8].h,B[9].x+B[9].w/2,B[9].y,'#ffcc00');
  drawArr(B[9].x+B[9].w/2,B[9].y+B[9].h,B[10].x+B[10].w/2,B[10].y,'#ff8844');
  drawArr(B[10].x+B[10].w/2,B[10].y+B[10].h,B[11].x+B[11].w/2,B[11].y,'#aa66ff');
  drawArr(B[11].x,B[11].y+10,B[7].x-6,B[7].y+10,'#00ff88',1); // loop back
  drawArr(B[11].x+B[11].w/2,B[11].y+B[11].h,B[23].x+B[23].w,B[23].y+11,'#00ff88'); // to synthesize
  drawLoop(B[6].x,B[6].y,B[6].w,'#00ff88');
  // Execute → all tools
  for(let i=12;i<=17;i++)drawArr(B[8].x+B[8].w,B[8].y+10,B[i].x,B[i].y+10,B[i].c+'88');
  // Tools → storage (cross-links)
  const tS=[[12,18],[12,21],[13,19],[13,20],[14,18],[14,19],[15,19],[15,20],[16,19],[17,19],[17,20]];
  tS.forEach(([a,b])=>drawArr(B[a].x+B[a].w,B[a].y+10,B[b].x,B[b].y+10,B[b].c+'66'));
  // Storage → DB
  for(let i=18;i<=21;i++)drawArr(B[i].x+B[i].w,B[i].y+10,B[22].x,B[22].y+11,B[i].c+'66');
  B.forEach(b=>drawBox(b,false,false));
  // Particles
  if(fr%30===0)spawnP(B[0].x+B[0].w,B[0].y+11,B[1].x,B[1].y+11,'#4488ff');
  if(fr%22===0){const i=2+Math.floor(Math.random()*4);spawnP(B[1].x+B[1].w,B[1].y+11,B[i].x,B[i].y+10,B[i].c);}
  if(fr%18===0){const i=12+Math.floor(Math.random()*6);spawnP(B[8].x+B[8].w,B[8].y+10,B[i].x,B[i].y+10,'#4488ff');}
  if(fr%20===0){const t=tS[Math.floor(Math.random()*tS.length)];spawnP(B[t[0]].x+B[t[0]].w,B[t[0]].y+10,B[t[1]].x,B[t[1]].y+10,B[t[1]].c);}
  if(fr%25===0){const i=18+Math.floor(Math.random()*4);spawnP(B[i].x+B[i].w,B[i].y+10,B[22].x,B[22].y+11,'#00ff88');}
  if(fr%40===0)spawnP(B[7].x+B[7].w/2,B[7].y+B[7].h,B[8].x+B[8].w/2,B[8].y,'#4488ff');
}

// ===== DATA LAYER MAP =====
function drawDataMap(){
  drawGrid();
  const cx2=W/2,cy=H/2;
  const B=[
    // Col 0: Node types
    {x:cx2-400,y:cy-90,w:80,h:18,l:'Person',c:'#4488ff'},
    {x:cx2-400,y:cy-60,w:80,h:18,l:'Company',c:'#aa66ff'},
    {x:cx2-400,y:cy-30,w:80,h:18,l:'Concept',c:'#ffcc00'},
    {x:cx2-400,y:cy,w:80,h:18,l:'Document',c:'#00dddd'},
    {x:cx2-400,y:cy+30,w:80,h:18,l:'Protocol',c:'#ff8844'},
    {x:cx2-400,y:cy+60,w:80,h:18,l:'Token',c:'#ff66aa'},
    // Col 1: Properties
    {x:cx2-270,y:cy-80,w:75,h:18,l:'name',c:'#4488ff'},
    {x:cx2-270,y:cy-50,w:75,h:18,l:'role',c:'#4488ff'},
    {x:cx2-270,y:cy-20,w:75,h:18,l:'industry',c:'#aa66ff'},
    {x:cx2-270,y:cy+10,w:75,h:18,l:'content',c:'#00dddd'},
    {x:cx2-270,y:cy+40,w:75,h:18,l:'tvl',c:'#ffcc00'},
    {x:cx2-270,y:cy+70,w:75,h:18,l:'ticker',c:'#ff66aa'},
    // Col 2: Edge types
    {x:cx2-145,y:cy-90,w:80,h:18,l:'WORKS_AT',c:'#00ff88'},
    {x:cx2-145,y:cy-62,w:80,h:18,l:'FOUNDED',c:'#00ff88'},
    {x:cx2-145,y:cy-34,w:80,h:18,l:'USES',c:'#00ff88'},
    {x:cx2-145,y:cy-6,w:80,h:18,l:'POWERS',c:'#00ff88'},
    {x:cx2-145,y:cy+22,w:80,h:18,l:'CO_FOUNDED',c:'#00ff88'},
    {x:cx2-145,y:cy+50,w:80,h:18,l:'EXPLOITED',c:'#ff4444'},
    {x:cx2-145,y:cy+78,w:80,h:18,l:'RIVALED',c:'#ff8844'},
    // Col 3: Embeddings
    {x:cx2-15,y:cy-70,w:80,h:18,l:'ada-002',c:'#00dddd'},
    {x:cx2-15,y:cy-40,w:80,h:18,l:'1536-dim',c:'#00dddd'},
    {x:cx2-15,y:cy-10,w:80,h:18,l:'Cosine Sim',c:'#4488ff'},
    {x:cx2-15,y:cy+20,w:80,h:18,l:'HNSW Index',c:'#aa66ff'},
    {x:cx2-15,y:cy+50,w:80,h:18,l:'Batch Embed',c:'#ffcc00'},
    // Col 4: Router
    {x:cx2+115,y:cy-80,w:80,h:18,l:'CRUD API',c:'#00ff88'},
    {x:cx2+115,y:cy-50,w:80,h:18,l:'Path Query',c:'#00ff88'},
    {x:cx2+115,y:cy-20,w:80,h:18,l:'Batch Ops',c:'#ffcc00'},
    {x:cx2+115,y:cy+10,w:80,h:18,l:'Vector Idx',c:'#00dddd'},
    {x:cx2+115,y:cy+40,w:80,h:18,l:'Schema Mgr',c:'#aa66ff'},
    {x:cx2+115,y:cy+70,w:80,h:18,l:'Transaction',c:'#ff8844'},
    // Col 5: Backends
    {x:cx2+245,y:cy-80,w:80,h:18,l:'Local JSON',c:'#ffcc00'},
    {x:cx2+245,y:cy-50,w:80,h:18,l:'Neo4j',c:'#4488ff'},
    {x:cx2+245,y:cy-20,w:80,h:18,l:'FalkorDB',c:'#aa66ff'},
    {x:cx2+245,y:cy+10,w:80,h:18,l:'Vector DB',c:'#00dddd'},
    {x:cx2+245,y:cy+40,w:80,h:18,l:'File Store',c:'#ff8844'},
    {x:cx2+245,y:cy+70,w:80,h:18,l:'Cache Layer',c:'#00ff88'},
    // Col 6: Output
    {x:cx2+375,y:cy-25,w:70,h:22,l:'GraphDB',c:'#00ff88'},
    {x:cx2+375,y:cy+10,w:70,h:22,l:'Ready',c:'#ffcc00'},
  ];
  drawSec(B[0].x,B[0].y-18,'NODES');drawSec(B[6].x,B[6].y-18,'PROPERTIES');drawSec(B[12].x,B[12].y-18,'EDGES');drawSec(B[19].x,B[19].y-18,'VECTORS');drawSec(B[24].x,B[24].y-18,'ROUTER');drawSec(B[30].x,B[30].y-18,'BACKENDS');
  // Dense neural-net style: nodes → props
  for(let i=0;i<6;i++)for(let j=6;j<12;j++)drawArr(B[i].x+B[i].w,B[i].y+9,B[j].x,B[j].y+9,B[j].c+'22');
  // Props → edges
  for(let i=6;i<12;i++)for(let j=12;j<19;j++)drawArr(B[i].x+B[i].w,B[i].y+9,B[j].x,B[j].y+9,B[j].c+'22');
  // Edges → vectors
  for(let i=12;i<19;i++)for(let j=19;j<24;j++)drawArr(B[i].x+B[i].w,B[i].y+9,B[j].x,B[j].y+9,B[j].c+'22');
  // Vectors → router
  for(let i=19;i<24;i++)for(let j=24;j<30;j++)drawArr(B[i].x+B[i].w,B[i].y+9,B[j].x,B[j].y+9,B[j].c+'22');
  // Router → backends
  for(let i=24;i<30;i++)for(let j=30;j<36;j++)drawArr(B[i].x+B[i].w,B[i].y+9,B[j].x,B[j].y+9,B[j].c+'22');
  // Backends → output
  for(let i=30;i<36;i++){drawArr(B[i].x+B[i].w,B[i].y+9,B[36].x,B[36].y+11,B[36].c+'44');drawArr(B[i].x+B[i].w,B[i].y+9,B[37].x,B[37].y+11,B[37].c+'33');}
  B.forEach(b=>drawBox(b,false,false));
  // Lots of particles flowing through the network
  if(fr%12===0){const i=Math.floor(Math.random()*6),j=6+Math.floor(Math.random()*6);spawnP(B[i].x+B[i].w,B[i].y+9,B[j].x,B[j].y+9,B[j].c);}
  if(fr%14===0){const i=6+Math.floor(Math.random()*6),j=12+Math.floor(Math.random()*7);spawnP(B[i].x+B[i].w,B[i].y+9,B[j].x,B[j].y+9,B[j].c);}
  if(fr%16===0){const i=12+Math.floor(Math.random()*7),j=19+Math.floor(Math.random()*5);spawnP(B[i].x+B[i].w,B[i].y+9,B[j].x,B[j].y+9,B[j].c);}
  if(fr%18===0){const i=19+Math.floor(Math.random()*5),j=24+Math.floor(Math.random()*6);spawnP(B[i].x+B[i].w,B[i].y+9,B[j].x,B[j].y+9,B[j].c);}
  if(fr%20===0){const i=24+Math.floor(Math.random()*6),j=30+Math.floor(Math.random()*6);spawnP(B[i].x+B[i].w,B[i].y+9,B[j].x,B[j].y+9,B[j].c);}
  if(fr%25===0){const i=30+Math.floor(Math.random()*6);spawnP(B[i].x+B[i].w,B[i].y+9,B[36].x,B[36].y+11,'#00ff88');}
}

function drawGrid(){
  // Base grid
  cx.strokeStyle='#0e0e14';cx.lineWidth=.3;
  for(let x=0;x<W;x+=40){cx.beginPath();cx.moveTo(x,0);cx.lineTo(x,H);cx.stroke();}
  for(let y=0;y<H;y+=40){cx.beginPath();cx.moveTo(0,y);cx.lineTo(W,y);cx.stroke();}
  // Brighter grid every 200px
  cx.strokeStyle='#14141e';cx.lineWidth=.5;
  for(let x=0;x<W;x+=200){cx.beginPath();cx.moveTo(x,0);cx.lineTo(x,H);cx.stroke();}
  for(let y=0;y<H;y+=200){cx.beginPath();cx.moveTo(0,y);cx.lineTo(W,y);cx.stroke();}
}

// HUD scrolling code lines
const HUD_CODE=[
  'memory.db.vector_search("ethereum", k=5)',
  'node = get_node_by_property("name", "Vitalik")',
  'edges = get_edges(node.id) # 6 connections',
  'embedding = generate_embedding(node.properties)',
  'similar = find_similar_nodes(embedding, k=3)',
  'create_edge(src, tgt, "co_founded")',
  'result = SmartRetrievalTool.run(question)',
  'context.append(tool_result)',
  'answer = llm.synthesize(context)',
  'batch_create_nodes([...entities])',
  'dedup_check: similarity=0.94 → merge',
  'SmartNodeProcessor.process(entity_list)',
  'ontology.validate(node_type="Person")',
  'graph.commit() # 3 nodes, 5 edges',
  'vector_index.add(embedding, node_id)',
  'query("MATCH (p)-[:WORKS_AT]->(c) RETURN p")',
  'chunk_splitter.split(text, max_tokens=512)',
  'tokenizer.encode(text) # 847 tokens',
  'cache.set(query_hash, result, ttl=300)',
  'path = find_path("Person","Company",depth=3)',
];
const HUD_STATS=['nodes','edges','embeddings','queries','latency_ms','throughput','cache_hits','loop_iter','dedup_rate','uptime'];

function drawHUD(){
  // Horizontal scan line
  const scanY=(fr*1.2)%H;
  cx.save();
  cx.globalAlpha=.06;
  cx.fillStyle='#00ff88';
  cx.fillRect(0,scanY,W,1);
  const grad=cx.createLinearGradient(0,scanY-15,0,scanY+15);
  grad.addColorStop(0,'transparent');grad.addColorStop(.5,'#00ff8808');grad.addColorStop(1,'transparent');
  cx.fillStyle=grad;cx.fillRect(0,scanY-15,W,30);
  cx.restore();

  // Vertical scan line
  const scanX=(fr*0.8)%W;
  cx.save();cx.globalAlpha=.04;cx.fillStyle='#4488ff';cx.fillRect(scanX,0,1,H);cx.restore();

  if(mode==='graph')return; // Skip HUD on force graph

  // Bottom-left scrolling code
  cx.save();
  cx.font='400 7px "JetBrains Mono"';
  const codeY=H-12;
  for(let i=0;i<6;i++){
    const idx=(Math.floor(fr/90)+i)%HUD_CODE.length;
    const alpha=.12-(i*.018);
    cx.globalAlpha=Math.max(alpha,0);
    cx.fillStyle='#00ff88';
    cx.textAlign='left';
    const lineOffset=(fr%90)/90*10;
    cx.fillText('> '+HUD_CODE[idx],10,codeY-i*10-lineOffset);
  }
  cx.restore();

  // Top-right telemetry
  cx.save();
  cx.font='500 7px "JetBrains Mono"';
  cx.textAlign='right';
  for(let i=0;i<5;i++){
    const idx=(Math.floor(fr/120)+i)%HUD_STATS.length;
    const val=mode==='arch'?Math.floor(Math.random()*900+100):Math.floor(Math.random()*500+50);
    cx.globalAlpha=.1-(i*.015);
    cx.fillStyle='#4488ff';
    cx.fillText(HUD_STATS[idx]+': '+val,W-10,16+i*11);
  }
  cx.restore();

  // Bottom-right system status
  cx.save();
  cx.font='400 6px "JetBrains Mono"';cx.textAlign='right';cx.globalAlpha=.12;
  cx.fillStyle='#00ff88';
  const statuses=['GRAPH_ACTIVE','LLM_LOOP_OK','VECTOR_IDX_READY','DB_CONNECTED','EMBEDDING_ONLINE'];
  statuses.forEach((s,i)=>{
    cx.fillText('[✓] '+s,W-10,H-10-i*9);
  });
  cx.restore();

  // Top-left mode label + frame counter
  cx.save();
  cx.font='600 8px "JetBrains Mono"';cx.textAlign='left';cx.globalAlpha=.1;
  cx.fillStyle='#00ff88';
  const modeLabels={arch:'SYSTEM_ARCHITECTURE',ingestMap:'INGEST_PIPELINE',queryMap:'QUERY_PIPELINE',dataMap:'DATA_LAYER'};
  cx.fillText('// '+(modeLabels[mode]||mode),10,14);
  cx.font='400 6px "JetBrains Mono"';cx.fillStyle='#444';
  cx.fillText('fr:'+fr+' | particles:'+particles.length+' | mode:'+mode,10,24);
  cx.restore();

  // Floating code snippets that drift across
  cx.save();
  const driftX=(fr*0.3)%W;
  cx.font='400 6px "JetBrains Mono"';cx.globalAlpha=.04;cx.fillStyle='#00ff88';cx.textAlign='left';
  cx.fillText('def ask(self, question):',driftX,H*0.2);
  cx.fillText('embedding = embed(text)',driftX-200,H*0.35);
  cx.fillText('for node in graph.traverse():',driftX+100,H*0.7);
  cx.fillText('yield context.append(result)',(driftX+300)%W,H*0.85);
  cx.fillStyle='#4488ff';
  cx.fillText('SmartRetrievalTool.chain_of_thought()',(driftX+150)%W,H*0.15);
  cx.fillStyle='#ffcc00';
  cx.fillText('SmartNodeProcessor.dedup(entity)',(driftX+400)%W,H*0.55);
  cx.restore();

  // Corner brackets
  cx.save();cx.strokeStyle='#00ff8815';cx.lineWidth=1;
  // Top-left
  cx.beginPath();cx.moveTo(4,20);cx.lineTo(4,4);cx.lineTo(20,4);cx.stroke();
  // Top-right
  cx.beginPath();cx.moveTo(W-20,4);cx.lineTo(W-4,4);cx.lineTo(W-4,20);cx.stroke();
  // Bottom-left
  cx.beginPath();cx.moveTo(4,H-20);cx.lineTo(4,H-4);cx.lineTo(20,H-4);cx.stroke();
  // Bottom-right
  cx.beginPath();cx.moveTo(W-20,H-4);cx.lineTo(W-4,H-4);cx.lineTo(W-4,H-20);cx.stroke();
  cx.restore();

  // Pulse rings (radar-like) from center
  cx.save();
  const pulseR=((fr*0.8)%200);
  cx.globalAlpha=Math.max(0,.04-pulseR/5000);
  cx.strokeStyle='#00ff88';cx.lineWidth=.5;
  cx.beginPath();cx.arc(W/2,H/2,pulseR,0,Math.PI*2);cx.stroke();
  cx.beginPath();cx.arc(W/2,H/2,pulseR+80,0,Math.PI*2);cx.stroke();
  cx.restore();

  // Mini sparkline in bottom-right
  cx.save();
  cx.strokeStyle='#00ff8818';cx.lineWidth=.5;cx.beginPath();
  for(let i=0;i<60;i++){
    const sv=Math.sin((fr+i*3)*.05)*6+Math.sin((fr+i*5)*.03)*4;
    if(i===0)cx.moveTo(W-70+i,H-60+sv);else cx.lineTo(W-70+i,H-60+sv);
  }
  cx.stroke();
  cx.restore();
}

// ===== MAIN LOOP =====
function loop(){
  cx.clearRect(0,0,W,H);
  sim();

  if(mode==='arch') drawArch();
  else if(mode==='ingestMap') drawIngestMap();
  else if(mode==='queryMap') drawQueryMap();
  else if(mode==='dataMap') drawDataMap();
  else drawGraph();

  // Particles (all modes) — enhanced with trails
  particles=particles.filter(p=>{
    p.p+=p.sp;if(p.p>=1)return false;
    const x=p.x+(p.tx-p.x)*p.p,y=p.y+(p.ty-p.y)*p.p;
    // Trail
    const px2=p.x+(p.tx-p.x)*Math.max(0,p.p-.03),py2=p.y+(p.ty-p.y)*Math.max(0,p.p-.03);
    cx.save();cx.globalAlpha=.15;cx.strokeStyle=p.c;cx.lineWidth=.4;
    cx.beginPath();cx.moveTo(px2,py2);cx.lineTo(x,y);cx.stroke();cx.restore();
    // Core
    cx.beginPath();cx.arc(x,y,p.sz,0,Math.PI*2);cx.fillStyle=p.c;cx.fill();
    // Glow
    cx.beginPath();cx.arc(x,y,p.sz*3,0,Math.PI*2);cx.fillStyle=p.c+'0a';cx.fill();
    return true;
  });

  // HUD overlay (on top of everything)
  drawHUD();

  fr++;requestAnimationFrame(loop);
}

// ===== ARCH BOX CODE SIMULATIONS =====
const ARCH_CODE = {
  user: {
    label:'USER',type:'Interface',color:'#aa66ff',
    info:'<span class="api-label">Overview</span>The user/operator entry point. Calls ask() for querying the graph or ingest() for adding new knowledge.<span class="api-label">Methods</span><span class="api-fn">memory.ask(question) → Answer</span><span class="api-fn">memory.ingest(text) → Result</span><span class="api-label">Stats</span><div class="api-stat"><span>Queries today</span><span class="val">147</span></div><div class="api-stat"><span>Docs ingested</span><span class="val">38</span></div><div class="api-stat"><span>Avg latency</span><span class="val">1.2s</span></div>',
    code:[
      '<span class="cc">#!/usr/bin/env python3</span>',
      '<span class="cc"># Graphista — User Interface Layer</span>',
      '<span class="ck">from</span> <span class="cf">graphista</span> <span class="ck">import</span> Memory',
      '',
      '<span class="cc"># Initialize memory with ontology + LLM config</span>',
      '<span class="cv">memory</span> = Memory(',
      '    ontology=<span class="cs2">"blockchain_crypto.yaml"</span>,',
      '    llm_config={<span class="cs2">"model"</span>: <span class="cs2">"gpt-4o"</span>, <span class="cs2">"temp"</span>: <span class="cn">0.0</span>},',
      '    db_config={<span class="cs2">"backend"</span>: <span class="cs2">"local"</span>}',
      ')',
      '',
      '<span class="cc"># === ASK: Natural language query ===</span>',
      '<span class="cv">answer</span> = memory.<span class="cf">ask</span>(<span class="cs2">"Who founded Solana?"</span>)',
      '<span class="ck">print</span>(answer.final_answer)',
      '<span class="cc"># → "Solana Labs was founded by Anatoly Yakovenko"</span>',
      '<span class="ck">print</span>(answer.chain_of_thought)',
      '<span class="cc"># → ["scan: Solana", "match: Anatoly → founded → Solana"]</span>',
      '',
      '<span class="cc"># === INGEST: Feed raw text ===</span>',
      '<span class="cv">result</span> = memory.<span class="cf">ingest</span>(<span class="cs2">"Vitalik proposed EIP-4844 for proto-danksharding"</span>)',
      '<span class="ck">print</span>(result.doc_id)      <span class="cc"># "doc_0042"</span>',
      '<span class="ck">print</span>(result.new_nodes)   <span class="cc"># 2</span>',
      '<span class="ck">print</span>(result.new_edges)   <span class="cc"># 3</span>',
    ]
  },
  ask: {
    label:'ask(question)',type:'Function',color:'#4488ff',
    info:'<span class="api-label">Signature</span><span class="api-fn">memory.ask(question: str) → Answer</span><span class="api-label">Returns</span><span class="api-fn">{final_answer, chain_of_thought}</span><span class="api-label">Pipeline</span>1. Parse question<br>2. SmartRetrievalTool loop<br>3. CoT graph traversal<br>4. Synthesize answer<span class="api-label">Stats</span><div class="api-stat"><span>Avg hops</span><span class="val">3.2</span></div><div class="api-stat"><span>Avg tools used</span><span class="val">4.7</span></div>',
    code:[
      '<span class="cc"># ask() — Natural Language Query Pipeline</span>',
      '<span class="ck">def</span> <span class="cf">ask</span>(self, question: <span class="cv">str</span>) -> Answer:',
      '    <span class="cc"># Step 1: Parse & embed the question</span>',
      '    <span class="cv">q_embed</span> = self.llm.<span class="cf">embed</span>(question)',
      '    <span class="cv">context</span> = []',
      '',
      '    <span class="cc"># Step 2: Initialize SmartRetrievalTool</span>',
      '    <span class="cv">tool</span> = SmartRetrievalTool(',
      '        db=self.db,',
      '        tools=[<span class="cs2">"find_similar_nodes"</span>, <span class="cs2">"get_edges"</span>,',
      '               <span class="cs2">"get_connected_nodes"</span>, <span class="cs2">"vector_search"</span>,',
      '               <span class="cs2">"query"</span>]',
      '    )',
      '',
      '    <span class="cc"># Step 3: Chain-of-thought reasoning loop</span>',
      '    <span class="ck">while</span> <span class="ck">not</span> tool.finished:',
      '        <span class="cv">action</span> = self.llm.<span class="cf">decide_action</span>(question, context)',
      '        <span class="cv">result</span> = tool.<span class="cf">execute</span>(action)',
      '        context.append({<span class="cs2">"action"</span>: action, <span class="cs2">"result"</span>: result})',
      '',
      '    <span class="cc"># Step 4: Synthesize final answer</span>',
      '    <span class="cv">answer</span> = self.llm.<span class="cf">synthesize</span>(question, context)',
      '    <span class="ck">return</span> Answer(',
      '        final_answer=answer,',
      '        chain_of_thought=[c[<span class="cs2">"action"</span>] <span class="ck">for</span> c <span class="ck">in</span> context]',
      '    )',
    ]
  },
  ingest: {
    label:'ingest(text)',type:'Function',color:'#ffcc00',
    info:'<span class="api-label">Signature</span><span class="api-fn write">memory.ingest(text: str) → Result</span><span class="api-label">Returns</span><span class="api-fn write">{doc_id, processing_result}</span><span class="api-label">Pipeline</span>1. Extract entities via LLM<br>2. Dedup against existing nodes<br>3. Generate embeddings<br>4. Create nodes + edges<span class="api-label">Stats</span><div class="api-stat"><span>Avg entities/doc</span><span class="val">4.3</span></div><div class="api-stat"><span>Dedup rate</span><span class="val">23%</span></div>',
    code:[
      '<span class="cc"># ingest() — Text Ingestion Pipeline</span>',
      '<span class="ck">def</span> <span class="cf">ingest</span>(self, text: <span class="cv">str</span>) -> Result:',
      '    <span class="cv">doc_id</span> = self.<span class="cf">generate_doc_id</span>()',
      '',
      '    <span class="cc"># Step 1: LLM extracts entities</span>',
      '    <span class="cv">entities</span> = self.llm.<span class="cf">extract_entities</span>(',
      '        text, ontology=self.ontology',
      '    )',
      '',
      '    <span class="cc"># Step 2: Initialize SmartNodeProcessor</span>',
      '    <span class="cv">processor</span> = SmartNodeProcessor(',
      '        db=self.db,',
      '        read_tools=[<span class="cs2">"find_similar"</span>, <span class="cs2">"get_node"</span>],',
      '        write_tools=[<span class="cs2">"create_node"</span>, <span class="cs2">"create_edge"</span>,',
      '                     <span class="cs2">"batch_create"</span>]',
      '    )',
      '',
      '    <span class="cc"># Step 3: Process each entity</span>',
      '    <span class="ck">for</span> entity <span class="ck">in</span> entities:',
      '        processor.<span class="cf">process</span>(entity)  <span class="cc"># dedup + embed + link</span>',
      '',
      '    <span class="ck">return</span> Result(doc_id=doc_id, result=processor.summary)',
    ]
  },
  answer: {
    label:'Answer',type:'Return Object',color:'#4488ff',
    info:'<span class="api-label">Schema</span><span class="api-fn">Answer.final_answer: str</span><span class="api-fn">Answer.chain_of_thought: list</span><span class="api-fn">Answer.sources: list[Node]</span><span class="api-fn">Answer.confidence: float</span><span class="api-label">Example</span><div class="api-stat"><span>confidence</span><span class="val">0.94</span></div><div class="api-stat"><span>cot_steps</span><span class="val">5</span></div>',
    code:[
      '<span class="cc"># Answer — Response object from ask()</span>',
      '<span class="ck">class</span> <span class="cf">Answer</span>:',
      '    final_answer: <span class="cv">str</span>',
      '    chain_of_thought: list[<span class="cv">str</span>]',
      '    sources: list[Node]',
      '    confidence: <span class="cv">float</span>',
      '',
      '<span class="cc"># Example output:</span>',
      '<span class="cc"># Answer(</span>',
      '<span class="cc">#   final_answer="Solana was founded by Anatoly Yakovenko",</span>',
      '<span class="cc">#   chain_of_thought=[</span>',
      '<span class="cc">#     "scan: matching \'Solana\' across 20 nodes",</span>',
      '<span class="cc">#     "found: Solana Labs [Company]",</span>',
      '<span class="cc">#     "edge: Anatoly → founded → Solana Labs",</span>',
      '<span class="cc">#     "context: uses PoH+PoS, supports DeFi",</span>',
      '<span class="cc">#     "synthesize: combining 3 nodes, 4 edges"</span>',
      '<span class="cc">#   ],</span>',
      '<span class="cc">#   confidence=0.94</span>',
      '<span class="cc"># )</span>',
    ]
  },
  result: {
    label:'Result',type:'Return Object',color:'#ffcc00',
    info:'<span class="api-label">Schema</span><span class="api-fn write">Result.doc_id: str</span><span class="api-fn write">Result.new_nodes: int</span><span class="api-fn write">Result.new_edges: int</span><span class="api-fn write">Result.dedup_merged: int</span><span class="api-label">Example</span><div class="api-stat"><span>doc_id</span><span class="val">doc_0042</span></div><div class="api-stat"><span>new_nodes</span><span class="val">3</span></div>',
    code:[
      '<span class="cc"># Result — Response object from ingest()</span>',
      '<span class="ck">class</span> <span class="cf">Result</span>:',
      '    doc_id: <span class="cv">str</span>',
      '    new_nodes: <span class="cv">int</span>',
      '    new_edges: <span class="cv">int</span>',
      '    dedup_merged: <span class="cv">int</span>',
      '    processing_log: list[<span class="cv">str</span>]',
      '',
      '<span class="cc"># Example output:</span>',
      '<span class="cc"># Result(</span>',
      '<span class="cc">#   doc_id="doc_0042",</span>',
      '<span class="cc">#   new_nodes=3,</span>',
      '<span class="cc">#   new_edges=5,</span>',
      '<span class="cc">#   dedup_merged=1,</span>',
      '<span class="cc">#   processing_log=["extracted 4 entities",</span>',
      '<span class="cc">#     "merged \'Ethereum\' (duplicate)",</span>',
      '<span class="cc">#     "created 5 new edges"]</span>',
      '<span class="cc"># )</span>',
    ]
  },
  retool: {
    label:'SmartRetrievalTool',type:'LLM Loop',color:'#00ff88',
    info:'<span class="api-label">Access</span>Read-only graph access<span class="api-label">Available Tools</span><span class="api-fn">find_similar_nodes()</span><span class="api-fn">get_node_by_property()</span><span class="api-fn">get_connected_nodes()</span><span class="api-fn">get_edges()</span><span class="api-fn">vector_search()</span><span class="api-fn">query()</span><span class="api-label">Loop</span>Iterates until finish action<span class="api-label">Stats</span><div class="api-stat"><span>Avg iterations</span><span class="val">3.7</span></div><div class="api-stat"><span>Tool calls/query</span><span class="val">4.2</span></div>',
    code:[
      '<span class="cc"># SmartRetrievalTool — Chain-of-Thought Loop</span>',
      '<span class="ck">class</span> <span class="cf">SmartRetrievalTool</span>:',
      '    <span class="cs2">"""Read-only graph access for answering queries."""</span>',
      '',
      '    <span class="ck">def</span> <span class="cf">__init__</span>(self, db, tools):',
      '        self.db = db',
      '        self.tools = tools',
      '        self.finished = <span class="cn">False</span>',
      '        self.history = []',
      '',
      '    <span class="ck">def</span> <span class="cf">execute</span>(self, action):',
      '        <span class="ck">if</span> action.type == <span class="cs2">"finish"</span>:',
      '            self.finished = <span class="cn">True</span>',
      '            <span class="ck">return</span> action.answer',
      '',
      '        <span class="cc"># Route to appropriate read tool</span>',
      '        <span class="cv">tool_fn</span> = self.tools[action.tool_name]',
      '        <span class="cv">result</span> = tool_fn(**action.params)',
      '        self.history.append({',
      '            <span class="cs2">"tool"</span>: action.tool_name,',
      '            <span class="cs2">"params"</span>: action.params,',
      '            <span class="cs2">"result"</span>: result',
      '        })',
      '        <span class="ck">return</span> result',
      '',
      '    <span class="cc"># Example iteration:</span>',
      '    <span class="cc"># → vector_search("Solana founder") → [Anatoly]</span>',
      '    <span class="cc"># → get_edges(anatoly.id) → [founded→Solana]</span>',
      '    <span class="cc"># → get_connected(solana.id) → [PoS, DeFi]</span>',
      '    <span class="cc"># → finish(answer="Anatoly Yakovenko...")</span>',
    ]
  },
  proctool: {
    label:'SmartNodeProcessor',type:'LLM Loop',color:'#00ff88',
    info:'<span class="api-label">Access</span>Full read + write access<span class="api-label">Read Tools</span><span class="api-fn">find_similar_nodes()</span><span class="api-fn">get_node_by_property()</span><span class="api-fn">vector_search()</span><span class="api-label">Write Tools</span><span class="api-fn write">create_node()</span><span class="api-fn write">update_node()</span><span class="api-fn write">create_edge()</span><span class="api-fn write">batch_create_nodes()</span><span class="api-fn write">batch_create_edges()</span><span class="api-label">Stats</span><div class="api-stat"><span>Dedup accuracy</span><span class="val">96.2%</span></div>',
    code:[
      '<span class="cc"># SmartNodeProcessor — Node Processing Loop</span>',
      '<span class="ck">class</span> <span class="cf">SmartNodeProcessor</span>:',
      '    <span class="cs2">"""Full read/write access. Deduplicates & extracts."""</span>',
      '',
      '    <span class="ck">def</span> <span class="cf">process</span>(self, entity):',
      '        <span class="cc"># Check for existing duplicate</span>',
      '        <span class="cv">existing</span> = self.db.<span class="cf">find_similar_nodes</span>(',
      '            <span class="cf">embed</span>(entity.name), threshold=<span class="cn">0.92</span>',
      '        )',
      '',
      '        <span class="ck">if</span> existing:',
      '            <span class="cc"># Merge into existing node</span>',
      '            self.db.<span class="cf">update_node</span>(',
      '                existing[<span class="cn">0</span>].id,',
      '                {**existing[<span class="cn">0</span>].props, **entity.props}',
      '            )',
      '            <span class="cv">node_id</span> = existing[<span class="cn">0</span>].id',
      '        <span class="ck">else</span>:',
      '            <span class="cc"># Create new node</span>',
      '            <span class="cv">node_id</span> = self.db.<span class="cf">create_node</span>(',
      '                entity.label, entity.props',
      '            )',
      '',
      '        <span class="cc"># Create relationships</span>',
      '        <span class="ck">for</span> rel <span class="ck">in</span> entity.relationships:',
      '            self.db.<span class="cf">create_edge</span>(',
      '                node_id, rel.target, rel.type',
      '            )',
    ]
  },
  rtools: {
    label:'Read-Only Tools',type:'Tool Library',color:'#4488ff',
    info:'<span class="api-label">Available Functions</span><span class="api-fn">find_similar_nodes(embedding, k)</span><span class="api-fn">get_nodes_with_property(key, val)</span><span class="api-fn">get_node_by_property(key, val)</span><span class="api-fn">get_connected_nodes(node_id)</span><span class="api-fn">get_edges(node_id)</span><span class="api-fn">get_node(node_id)</span><span class="api-fn">vector_search(query, k)</span><span class="api-fn">query(cypher_str)</span><span class="api-label">Access</span>Used by both SmartRetrievalTool and SmartNodeProcessor',
    code:[
      '<span class="cc"># Read-Only Tools — Graph Query Interface</span>',
      '',
      '<span class="ck">def</span> <span class="cf">find_similar_nodes</span>(embedding, k=<span class="cn">5</span>):',
      '    <span class="cs2">"""Vector similarity search across all node embeddings."""</span>',
      '    <span class="ck">return</span> db.<span class="cf">cosine_search</span>(embedding, top_k=k)',
      '',
      '<span class="ck">def</span> <span class="cf">get_node_by_property</span>(key, value):',
      '    <span class="cs2">"""Find node by exact property match."""</span>',
      '    <span class="ck">return</span> db.nodes.<span class="cf">filter</span>(**{key: value}).first()',
      '',
      '<span class="ck">def</span> <span class="cf">get_connected_nodes</span>(node_id):',
      '    <span class="cs2">"""Get all nodes connected by edges."""</span>',
      '    <span class="cv">edges</span> = db.<span class="cf">get_edges</span>(node_id)',
      '    <span class="ck">return</span> [db.<span class="cf">get_node</span>(e.target) <span class="ck">for</span> e <span class="ck">in</span> edges]',
      '',
      '<span class="ck">def</span> <span class="cf">get_edges</span>(node_id):',
      '    <span class="cs2">"""Get all edges from/to a node."""</span>',
      '    <span class="ck">return</span> db.edges.<span class="cf">filter</span>(src=node_id) | db.edges.<span class="cf">filter</span>(tgt=node_id)',
      '',
      '<span class="ck">def</span> <span class="cf">vector_search</span>(query_text, k=<span class="cn">5</span>):',
      '    <span class="cv">vec</span> = llm.<span class="cf">embed</span>(query_text)',
      '    <span class="ck">return</span> <span class="cf">find_similar_nodes</span>(vec, k)',
      '',
      '<span class="ck">def</span> <span class="cf">query</span>(cypher_str):',
      '    <span class="cs2">"""Execute raw Cypher/GQL query."""</span>',
      '    <span class="ck">return</span> db.<span class="cf">execute</span>(cypher_str)',
    ]
  },
  wtools: {
    label:'Write Tools',type:'Tool Library',color:'#ffcc00',
    info:'<span class="api-label">Available Functions</span><span class="api-fn write">create_node(label, properties)</span><span class="api-fn write">update_node(node_id, properties)</span><span class="api-fn write">create_edge(src, tgt, rel_type)</span><span class="api-fn write">batch_create_nodes(nodes_list)</span><span class="api-fn write">batch_create_edges(edges_list)</span><span class="api-fn write">batch_update_nodes(updates)</span><span class="api-label">Access</span>SmartNodeProcessor ONLY<br>SmartRetrievalTool cannot write',
    code:[
      '<span class="cc"># Write Tools — Graph Mutation Interface</span>',
      '<span class="cc"># ⚠ Only accessible by SmartNodeProcessor</span>',
      '',
      '<span class="ck">def</span> <span class="cf">create_node</span>(label, properties):',
      '    <span class="cs2">"""Create a new node with auto-embedding."""</span>',
      '    <span class="cv">node_id</span> = db.<span class="cf">insert</span>(label, properties)',
      '    <span class="cv">embedding</span> = llm.<span class="cf">embed</span>(json.dumps(properties))',
      '    db.<span class="cf">store_embedding</span>(node_id, embedding)',
      '    <span class="ck">return</span> node_id',
      '',
      '<span class="ck">def</span> <span class="cf">update_node</span>(node_id, properties):',
      '    <span class="cs2">"""Merge new properties into existing node."""</span>',
      '    db.<span class="cf">merge_properties</span>(node_id, properties)',
      '    <span class="cc"># Re-generate embedding with updated props</span>',
      '    db.<span class="cf">refresh_embedding</span>(node_id)',
      '',
      '<span class="ck">def</span> <span class="cf">create_edge</span>(src_id, tgt_id, rel_type):',
      '    <span class="cs2">"""Create directed edge between nodes."""</span>',
      '    <span class="ck">return</span> db.<span class="cf">insert_edge</span>(src_id, tgt_id, rel_type)',
      '',
      '<span class="ck">def</span> <span class="cf">batch_create_nodes</span>(nodes):',
      '    <span class="cs2">"""Bulk insert with parallel embedding."""</span>',
      '    <span class="cv">embeddings</span> = llm.<span class="cf">batch_embed</span>([n.text <span class="ck">for</span> n <span class="ck">in</span> nodes])',
      '    <span class="ck">return</span> db.<span class="cf">bulk_insert</span>(nodes, embeddings)',
    ]
  },
  db: {
    label:'GraphDatabase',type:'Backend',color:'#00ff88',
    info:'<span class="api-label">Supported Backends</span><span class="api-fn">Local (JSON file storage)</span><span class="api-fn">Neo4j (production graph DB)</span><span class="api-fn">FalkorDB (in-memory graph)</span><span class="api-label">Storage</span>Nodes, edges, embeddings<br>Vector index for similarity<span class="api-label">Stats</span><div class="api-stat"><span>Nodes</span><span class="val">20</span></div><div class="api-stat"><span>Edges</span><span class="val">38</span></div><div class="api-stat"><span>Embed dim</span><span class="val">1536</span></div><div class="api-stat"><span>Backend</span><span class="val">local</span></div>',
    code:[
      '<span class="cc"># GraphDatabase — Backend Abstraction Layer</span>',
      '<span class="ck">class</span> <span class="cf">GraphDatabase</span>:',
      '    <span class="cs2">"""Unified interface for Local/Neo4j/FalkorDB."""</span>',
      '',
      '    <span class="ck">def</span> <span class="cf">__init__</span>(self, backend=<span class="cs2">"local"</span>):',
      '        <span class="ck">if</span> backend == <span class="cs2">"local"</span>:',
      '            self.store = LocalJSONStore(<span class="cs2">"graph.json"</span>)',
      '        <span class="ck">elif</span> backend == <span class="cs2">"neo4j"</span>:',
      '            self.store = Neo4jDriver(uri, auth)',
      '        <span class="ck">elif</span> backend == <span class="cs2">"falkordb"</span>:',
      '            self.store = FalkorDBClient(host, port)',
      '',
      '    <span class="ck">def</span> <span class="cf">insert</span>(self, label, props):',
      '        <span class="cv">node_id</span> = <span class="cf">generate_id</span>()',
      '        self.store.<span class="cf">write_node</span>({',
      '            <span class="cs2">"id"</span>: node_id,',
      '            <span class="cs2">"label"</span>: label,',
      '            <span class="cs2">"properties"</span>: props,',
      '            <span class="cs2">"created_at"</span>: <span class="cf">now</span>()',
      '        })',
      '        <span class="ck">return</span> node_id',
      '',
      '    <span class="ck">def</span> <span class="cf">cosine_search</span>(self, vec, top_k=<span class="cn">5</span>):',
      '        <span class="cs2">"""HNSW vector similarity search."""</span>',
      '        <span class="ck">return</span> self.vector_index.<span class="cf">search</span>(vec, top_k)',
    ]
  },
};

// ===== ARCH PANEL LOGIC =====
let archPanelOpen = false;
let archPanelKey = null;
let archCodeTimer = null;

function openArchPanel(key) {
  const data = ARCH_CODE[key];
  if (!data) return;

  // If clicking same box, toggle off
  if (archPanelOpen && archPanelKey === key) {
    closeArchPanel();
    return;
  }

  archPanelKey = key;
  archPanelOpen = true;

  const panel = document.getElementById('archPanel');
  const nameEl = document.getElementById('apName');
  const typeEl = document.getElementById('apType');
  const dotEl = document.getElementById('apDot');
  const codeEl = document.getElementById('apCode');
  const infoEl = document.getElementById('apInfo');
  const barEl = document.getElementById('apBar');

  nameEl.textContent = data.label;
  typeEl.textContent = data.type;
  dotEl.style.background = data.color;
  infoEl.innerHTML = data.info;
  codeEl.innerHTML = '';
  barEl.style.width = '0%';

  panel.classList.add('open');

  // Animate code lines
  if (archCodeTimer) clearTimeout(archCodeTimer);
  let i = 0;
  const lines = data.code;

  function addArchLine() {
    if (i >= lines.length) {
      const cursor = document.createElement('span');
      cursor.className = 'arch-code-cursor';
      codeEl.appendChild(cursor);
      barEl.style.width = '100%';
      return;
    }
    const line = document.createElement('span');
    line.className = 'cline';
    line.style.opacity = '0';
    line.style.transform = 'translateX(-6px)';
    if (lines[i] === '') {
      line.innerHTML = '&nbsp;';
    } else {
      line.innerHTML = lines[i];
    }
    codeEl.appendChild(line);
    requestAnimationFrame(() => {
      line.style.transition = 'all 0.15s ease';
      line.style.opacity = '1';
      line.style.transform = 'translateX(0)';
    });
    codeEl.scrollTop = codeEl.scrollHeight;
    barEl.style.width = Math.round(((i + 1) / lines.length) * 100) + '%';
    i++;
    archCodeTimer = setTimeout(addArchLine, 60 + Math.random() * 50);
  }
  addArchLine();

  // Burst particles from the clicked box toward panel
  const B = getB();
  const box = B[key];
  if (box) {
    for (let p = 0; p < 8; p++) {
      spawnP(box.x + box.w / 2, box.y + box.h / 2, box.x + Math.random() * box.w, H - 20, box.c);
    }
  }
}

function closeArchPanel() {
  archPanelOpen = false;
  archPanelKey = null;
  if (archCodeTimer) clearTimeout(archCodeTimer);
  document.getElementById('archPanel').classList.remove('open');
}

document.getElementById('apClose').onclick = closeArchPanel;

// ===== CANVAS EVENTS =====
const tooltip=document.getElementById('atp');
cv.onmousemove=e=>{
  const r=cv.getBoundingClientRect(),mx=e.clientX-r.left,my=e.clientY-r.top;
  mouseX=mx;mouseY=my;

  if(mode==='arch'){
    hoveredBox=boxAt(mx,my);
    cv.style.cursor=hoveredBox?'pointer':'default';
    if(hoveredBox && !archPanelOpen){
      tooltip.classList.add('show');
      tooltip.style.left=Math.min(mx+12,W-230)+'px';tooltip.style.top=Math.min(my+12,H-80)+'px';
      document.getElementById('atpN').textContent=hoveredBox.l;
      document.getElementById('atpD').textContent=hoveredBox.d.replace(/\\n/g,'\n');
    } else tooltip.classList.remove('show');
  } else {
    hN=nodeAt(mx,my);cv.style.cursor=hN?'pointer':(drag?'grabbing':'crosshair');
    tooltip.classList.remove('show');
    if(drag&&dN){dN.x=(mx-W/2-px)/zm;dN.y=(my-H/2-py)/zm;dN.vx=0;dN.vy=0;}
    else if(drag){px+=e.movementX;py+=e.movementY;}
  }
};
cv.onmousedown=e=>{
  const r=cv.getBoundingClientRect(),mx=e.clientX-r.left,my=e.clientY-r.top;
  if(mode==='arch'){
    const box = boxAt(mx, my);
    if(box) openArchPanel(box.key);
  } else {
    dN=nodeAt(mx,my);if(dN)selN(dN.id);drag=true;
  }
};
cv.onmouseup=()=>{drag=false;dN=null};
cv.onwheel=e=>{if(mode==='graph'){e.preventDefault();zm*=e.deltaY>0?.95:1.05;zm=Math.max(.3,Math.min(3,zm));}};
cv.onmouseleave=()=>{tooltip.classList.remove('show');hoveredBox=null;hN=null;};
document.getElementById('zI').onclick=()=>{zm=Math.min(3,zm*1.2)};
document.getElementById('zO').onclick=()=>{zm=Math.max(.3,zm*.8)};
document.getElementById('zR').onclick=()=>{zm=1;px=0;py=0;selId=null};

// ===== ASK =====
const aIn=document.getElementById('aIn'),aSend=document.getElementById('aSend'),aB=document.getElementById('aB');
function addM(r,txt,cot){const d=document.createElement('div');d.className='mg';const isA=r==='a';let ch='';if(cot&&cot.length)ch=`<div class="co">${cot.map(s=>`<div class="cs">${s}</div>`).join('')}</div>`;d.innerHTML=`<div class="ma ${r}">${isA?'G':'U'}</div><div class="mb"><div class="mw">${isA?'graphista_engine':'operator'}</div><div class="mt">${txt}</div>${ch}</div>`;aB.appendChild(d);aB.scrollTop=aB.scrollHeight;}
function addTy(){const d=document.createElement('div');d.className='mg';d.id='tyI';d.innerHTML=`<div class="ma a">G</div><div class="mb"><div class="mw">graphista_engine</div><div class="mt"><span class="ty"><span></span><span></span><span></span></span></div></div>`;aB.appendChild(d);aB.scrollTop=aB.scrollHeight;}
function hQ(){const q=aIn.value.trim();if(!q)return;addM('u',q);aIn.value='';addTy();const m=QA.find(r=>r.q.test(q))||DQA;setTimeout(()=>{const el=document.getElementById('tyI');if(el)el.remove();addM('a',m.a,m.cot);},1200+Math.random()*800);}
aSend.onclick=hQ;aIn.onkeydown=e=>{if(e.key==='Enter')hQ()};

// ===== INGEST =====
const iT=document.getElementById('iT'),iG=document.getElementById('iG'),iM=document.getElementById('iM'),iL=document.getElementById('iL');
function ts(){return new Date().toLocaleTimeString('en-US',{hour12:false,hour:'2-digit',minute:'2-digit',second:'2-digit'})}
function addL(tg,h){const d=document.createElement('div');d.className='le';d.innerHTML=`<span class="t">${ts()}</span><span class="tg tg-${tg}">${tg}</span><span>${h}</span>`;iL.appendChild(d);iL.scrollTop=iL.scrollHeight;}
function doIng(){
  const txt=iT.value.trim();if(!txt)return;iG.disabled=true;iM.textContent='> processing...';
  const caps=txt.match(/[A-Z][a-z]+(?:\s[A-Z][a-z]+)*/g)||['Entity'];const e1=caps[0],e2=caps[1]||caps[0];
  [[250,'extract',`parsing: "${txt.slice(0,40)}..."`],[600,'extract',`→ <strong>${e1}</strong>`],[950,'extract',`→ <strong>${e2}</strong>`],[1300,'dedup',`checking ${N.length} nodes...`],[1650,'embed',`ada-002 1536-dim`],[2000,'link',`${e1} → ${e2}`],[2350,'store',`+2 nodes +1 edge`]].forEach(([d,t,h])=>setTimeout(()=>addL(t,h),d));
  setTimeout(()=>{iG.disabled=false;iM.textContent='> ready_';
    N.push({id:N.length,l:e1.slice(0,18),t:'person',s:'Ingested',p:{source:'ingest'},x:(Math.random()-.5)*200,y:(Math.random()-.5)*200,vx:0,vy:0,r:12});
    N.push({id:N.length,l:e2.slice(0,18),t:'concept',s:'Ingested',p:{source:'ingest'},x:(Math.random()-.5)*200,y:(Math.random()-.5)*200,vx:0,vy:0,r:10});
    E.push({s:N.length-2,t:N.length-1,l:'relates_to'});E.push({s:N.length-2,t:Math.floor(Math.random()*(N.length-2)),l:'connected'});
    updS();renderN();
  },2500);
}
iG.onclick=doIng;iT.onkeydown=e=>{if(e.key==='Enter'&&e.metaKey)doIng()};
document.querySelectorAll('.sbn').forEach(b=>b.onclick=()=>{iT.value=SAMP[b.dataset.s]});

function updS(){['sN','sN2'].forEach(id=>document.getElementById(id).textContent=N.length);['sE','sE2'].forEach(id=>document.getElementById(id).textContent=E.length);document.getElementById('sD').textContent=+document.getElementById('sD').textContent+1;}

// ===== CA COPY =====
function copyCA(){
  const addr=document.getElementById('caAddr').textContent;
  navigator.clipboard.writeText(addr).then(()=>{
    const btn=document.getElementById('caCopy');
    btn.textContent='Copied!';btn.classList.add('done');
    setTimeout(()=>{btn.textContent='Copy CA';btn.classList.remove('done')},1500);
  });
}

// ===== LOADING SCREEN =====
const BOOT_LINES = [
  {t:200,  h:'<span class="lc">$</span> <span class="lw">graphista</span> <span class="lk">init</span> --backend=local'},
  {t:500,  h:'<span class="lc">[boot]</span> Loading ontology config...'},
  {t:800,  h:'<span class="lc">[boot]</span> <span class="lb">Graph-Based Memory</span> — stores knowledge as interconnected nodes & edges'},
  {t:1100, h:'<span class="lc">[boot]</span> <span class="lb">LLM-Powered Loops</span> — two AI loops for reading and writing the graph'},
  {t:1500, h:'<span class="lc">[core]</span> <span class="lk">SmartRetrievalTool</span> — chain-of-thought reasoning over graph data'},
  {t:1800, h:'<span class="lc">[core]</span> &nbsp;&nbsp;↳ read-only access: vector_search, get_edges, find_similar_nodes'},
  {t:2100, h:'<span class="lc">[core]</span> <span class="ly">SmartNodeProcessor</span> — auto-extracts entities, deduplicates, links'},
  {t:2400, h:'<span class="lc">[core]</span> &nbsp;&nbsp;↳ read+write: create_node, update_node, create_edge, batch ops'},
  {t:2800, h:'<span class="lc">[api]</span> &nbsp;<span class="lp">memory.ask(question)</span> → natural language query with CoT reasoning'},
  {t:3100, h:'<span class="lc">[api]</span> &nbsp;<span class="lp">memory.ingest(text)</span> → extract → dedup → embed → link → store'},
  {t:3500, h:'<span class="lc">[db]</span> &nbsp;&nbsp;GraphRouter initialized — supports Local JSON / Neo4j / FalkorDB'},
  {t:3800, h:'<span class="lc">[vec]</span> &nbsp;Embedding engine: ada-002 (1536-dim) — vector similarity search ready'},
  {t:4100, h:'<span class="lc">[load]</span> Loading <span class="lk">20</span> nodes, <span class="lk">38</span> edges, <span class="lk">8</span> documents...'},
  {t:4400, h:'<span class="lc">[net]</span> &nbsp;Crypto knowledge graph: persons, companies, concepts, relationships'},
  {t:4800, h:'<span class="lk">[✓]</span> &nbsp;<span class="lw">System online</span> — graphista v0.1.0 | MIT License | by Pippin'},
];

const loaderLines = document.getElementById('loaderLines');
const loaderBar = document.getElementById('loaderBar');
const loaderStatus = document.getElementById('loaderStatus');
const totalTime = BOOT_LINES[BOOT_LINES.length-1].t + 600;

BOOT_LINES.forEach((l, i) => {
  setTimeout(() => {
    const div = document.createElement('div');
    div.className = 'loader-line';
    div.innerHTML = l.h;
    loaderLines.appendChild(div);
    requestAnimationFrame(() => div.classList.add('show'));
    loaderLines.scrollTop = loaderLines.scrollHeight;
    loaderBar.style.width = Math.round(((i + 1) / BOOT_LINES.length) * 100) + '%';
    if (i === BOOT_LINES.length - 1) {
      loaderStatus.textContent = 'ready';
      loaderStatus.style.color = '#00ff88';
      document.getElementById('loaderEnter').classList.add('show');
    }
  }, l.t);
});

function enterApp() {
  document.getElementById('loader').classList.add('done');
  document.getElementById('appMain').classList.add('ready');
}

// ===== INIT =====
window.addEventListener('resize',resize);resize();renderN();loop();
</script>
</body>
</html>
